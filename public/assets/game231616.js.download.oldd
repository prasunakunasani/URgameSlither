var testing=!1;0<=window.location.href.indexOf("/testing")&&(testing=!0);var lang=navigator.language||navigator.userLanguage;lang=lang.substr(0,2);
var forcing=!1,ua=navigator.userAgent.toLowerCase(),is_android=0<=ua.indexOf("android"),is_amazon=0<=ua.indexOf("kindle")||0<=ua.indexOf("silk/"),uua=navigator.userAgent,is_ios=0<=uua.indexOf("iPad")||0<=uua.indexOf("iPhone")||0<=uua.indexOf("iPod"),is_mobile=0<=ua.indexOf("mobile"),is_firefox=-1<ua.indexOf("firefox"),is_ie8oo=window.attachEvent&&!window.addEventListener,is_chrome=!1,is_safari=!1;0<=ua.indexOf("safari")&&-1==ua.indexOf("chrome")&&(is_safari=!0);
0<=ua.indexOf("chrome")&&(is_safari||is_firefox||(is_chrome=!0));var no_raf=!1,raf=function(b){};window.requestAnimationFrame?raf=window.requestAnimationFrame:window.mozRequestAnimationFrame?raf=window.mozRequestAnimationFrame:window.webkitRequestAnimationFrame?raf=window.webkitRequestAnimationFrame:no_raf=!0;is_mobile||(no_raf=!0);no_raf=!0;
if(is_chrome)for(var uas=ua.split(" "),i=uas.length-1;0<=i;i--){var s=uas[i];if(0==s.indexOf("chrome/")){var vs=s.split("chrome/")[1];vs=vs.split(".");3<=vs.length&&(52<=Number(vs[0])?no_raf=!1:51==Number(vs[0])&&(1<=Number(vs[1])?no_raf=!1:2704<=Number(vs[2])&&(no_raf=!1)));break}}var doiosh=!1,a,j,k,l,m,n,o,r,fj,d,d2,qq,sc,agpu="translateZ(0)",ang,sang,vang;function trf(b,e){b.style.webkitTransform=b.style.OTransform=b.style.msTransform=b.style.MozTransform=b.style.transform=e}
function trfo(b,e){b.style.webkitTransformOrigin=b.style.OTransformOrigin=b.style.msTransformOrigin=b.style.MozTransformOrigin=b.style.transformOrigin=e}
var pi2=2*Math.PI,piar=[4,21,0,11],animating=!1,startAnimation=function(){animating=!0;no_raf?is_mobile?setInterval("oef()",33):is_safari?setInterval("oef()",33):setInterval("oef()",20):raf(oef)},ois=[],wic=0,ldi=function(b){wic++;var e={},c=document.createElement("img");e.ii=c;e.sc=1;c.onload=function(){for(var b=ois.length-1;0<=b;b--)if(ois[b].ii==this){b=ois[b];b.ww=this.width;b.hh=this.height;b.loaded=!0;if(b.onload)b.onload();break}wic--;0==wic&&startAnimation()};e.src=b;ois.push(e);return e};
function addCss(b){var e=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(e);e.type="text/css";e.styleSheet?e.styleSheet.cssText=b:e.appendChild(document.createTextNode(b))}var nbg=document.getElementById("nbg"),nzbg,sadg,sadu,sadd,p,xx,yy,grw,grh,elem,map,imgd,ctx;elem=document.createElement("canvas");var rw=64,rh=64;elem.width=rw;elem.height=rh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,rw,rh);imgd=map.data;l=imgd.length;
for(p=0;p<l;p+=4).5>Math.random()?imgd[p]=imgd[p+1]=imgd[p+2]=0:(imgd[p]=44,imgd[p+1]=56,imgd[p+2]=68),imgd[p+3]=Math.floor(32*Math.random());ctx.putImageData(map,0,0);nzbg=elem.toDataURL();32<nzbg.length&&(nbg.style.backgroundImage="url("+nzbg+")");grw=2;grh=56;elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;
for(yy=p=0;yy<grh;yy++)for(j=(grh-1-yy)/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.min(255,Math.floor(54.4+32*j)),imgd[p+1]=Math.min(255,Math.floor(108.8+64*j)),imgd[p+2]=Math.min(255,Math.floor(81.6+48*j)),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadg=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;
for(yy=p=0;yy<grh;yy++)for(j=(grh-1-yy)/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.min(255,Math.floor(72+.95*48*j)),imgd[p+1]=Math.min(255,Math.floor(171+93.1*j)),imgd[p+2]=Math.min(255,Math.floor(132+.95*87*j)),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadu=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;
for(yy=p=0;yy<grh;yy++)for(j=yy/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.floor(.1*48+36*j),imgd[p+1]=Math.floor(7+52.5*j),imgd[p+2]=Math.floor(6.4+48*j),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadd=elem.toDataURL();32<sadg.length&&32<sadu.length&&32<sadd.length&&addCss(".sadg1 { background-image:url("+sadg+"); }  .sadu1 { background-image:url("+sadu+"); }  .sadd1 { background-image:url("+sadd+"); }");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");
map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;for(yy=p=0;yy<grh;yy++)for(j=(grh-1-yy)/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.min(255,Math.floor(.85*52+26*j)),imgd[p+1]=Math.min(255,Math.floor(81.6+48*j)),imgd[p+2]=Math.min(255,Math.floor(.85*144+72*j)),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadg=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;
l=imgd.length;for(yy=p=0;yy<grh;yy++)for(j=(grh-1-yy)/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.min(255,Math.floor(72+.95*48*j)),imgd[p+1]=Math.min(255,Math.floor(132+.95*87*j)),imgd[p+2]=Math.min(255,Math.floor(171+93.1*j)),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadu=elem.toDataURL();elem=document.createElement("canvas");elem.width=grw;elem.height=grh;ctx=elem.getContext("2d");map=ctx.getImageData(0,0,grw,grh);imgd=map.data;l=imgd.length;
for(yy=p=0;yy<grh;yy++)for(j=yy/(grh-1),j=.5*(1-Math.cos(Math.PI*j)),xx=0;xx<grw;xx++)imgd[p]=Math.floor(.1*48+36*j),imgd[p+1]=Math.floor(5.4+40.5*j),imgd[p+2]=Math.floor(7+52.5*j),imgd[p+3]=255,p+=4;ctx.putImageData(map,0,0);sadd=elem.toDataURL();32<sadg.length&&32<sadu.length&&32<sadd.length&&addCss(".sadg2 { background-image:url("+sadg+"); }  .sadu2 { background-image:url("+sadu+"); }  .sadd2 { background-image:url("+sadd+"); }");var mos=[],whmos=!1,swmup=!1;
function mkBtn(b,e,c,h){var t=document.createElement("div");b.tagName||(b=document.getElementById(b),b.style.width=c+"px",b.style.height=h+"px",t.style.width=c+"px",t.style.height=h+"px");var f={lic:0};f.elem=b;f.md=!1;f.mo=!1;f.mdf=0;f.mof=0;var q=!0;b.style&&b.style.position&&("absolute"==(b.style.position+"").toLowerCase()&&(q=!1),"fixed"==(b.style.position+"").toLowerCase()&&(q=!1));q&&(b.style.position="relative");t.style.position="absolute";t.style.opacity=0;t.style.left="0px";t.style.top="0px";
b.appendChild(t);f.ho=t;f.alic=function(){this.lic++;if(3==this.lic&&(this.ho.style.opacity=1,this.onload))this.onload()};mos.push(f);f.setEnabled=function(b){b?(this.disabled=!1,this.upi.style.opacity=this.mof,this.downi.style.opacity=this.mdf,this.elem.style.opacity=1,this.elem.style.cursor="pointer"):(this.disabled=!0,this.upi.style.opacity=0,this.downi.style.opacity=0,this.elem.style.opacity=.38,this.elem.style.cursor="default")};if(e)for(q=1;3>=q;q++){var w=document.createElement("img");w.draggable=
!1;w.style.position="absolute";w.style.left="0px";w.style.top="0px";w.border=0;w.width=c;w.height=h;w.className="nsi";t.appendChild(w);1==q?(f.normi=w,w.onload=function(){for(var b=mos.length-1;0<=b;b--){var c=mos[b];if(c.normi==this){c.alic();break}}},w.src=e+".png"):2==q?(f.upi=w,w.style.opacity=0,w.onload=function(){for(var b=mos.length-1;0<=b;b--){var c=mos[b];if(c.upi==this){c.alic();break}}},w.src=e+"up.png"):3==q&&(f.downi=w,w.style.opacity=0,w.onload=function(){for(var b=mos.length-1;0<=b;b--){var c=
mos[b];if(c.downi==this){c.alic();break}}},w.src=e+"down.png")}else t.style.opacity=1;b.onmouseenter=function(){for(var b=mos.length-1;0<=b;b--){var c=mos[b];if(c.elem==this){if(!c.disabled&&!c.mo){c.mo=!0;if(c.onmouseenter)c.onmouseenter();whmos=!0}break}}};b.onmouseleave=function(){for(var b=mos.length-1;0<=b;b--){var c=mos[b];if(c.elem==this){if(c.mo){c.mo=!1;if(c.onmouseleave)c.onmouseleave();whmos=!0}break}}};b.onmousedown=function(b){for(var c=mos.length-1;0<=c;c--){var e=mos[c];if(e.elem==
this){if(!e.disabled&&!e.md){e.md=!0;if(e.onmousedown)e.onmousedown(b,e);whmos=!0;return!1}break}}};b.onmouseup=b.ondragend=function(b){for(var c=mos.length-1;0<=c;c--){var e=mos[c];if(e.elem==this){if(e.md){e.mdf=1;e.md=!1;if(e.onmouseup&&(e.onmouseup(b,e),is_mobile))e.elem.onmouseleave();whmos=!0}break}}};swmup||(swmup=!0,window.onmouseup=window.ondragover=window.ondragend=function(){for(var b=mos.length-1;0<=b;b--){var c=mos[b];c.md&&(c.md=!1,whmos=!0)}});return f}
function hmos(){for(var b,e=!1,c=mos.length-1;0<=c;c--){var h=mos[c];b=!1;h.mo?1!=h.mof&&(e=!0,h.mof+=.33,1<=h.mof&&(h.mof=1),b=!0):0!=h.mof&&(e=!0,h.mof-=.2,0>=h.mof&&(h.mof=0),b=!0);b&&(h.upi.style.opacity=h.disabled?0:h.mof);b=!1;h.md?1!=h.mdf&&(e=!0,h.mdf+=.33,1<=h.mdf&&(h.mdf=1),b=!0):0!=h.mdf&&(e=!0,h.mdf-=.2,0>=h.mdf&&(h.mdf=0),b=!0);b&&(h.downi.style.opacity=h.disabled?0:h.mdf)}e||(whmos=!1)}
function makeTextBtn(b,e,c,h,t){e||(e=56);56<e&&(e=56);c||(c=15);h||(h=14);var f=document.createElement("div");f.className="btnt nsi sadg"+t;var q=f.style;q.position="absolute";q.width="auto";q.color="#ffffff";q.fontWeight="bold";q.textAlign="center";q.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';q.fontSize=c+"px";f.textContent=b;q.cursor="pointer";document.body.appendChild(f);var w=Math.ceil(35+f.offsetWidth);document.body.removeChild(f);f.textContent="";q.width=w+"px";q.height=e+
"px";q.lineHeight=e+"px";is_mobile||(q.boxShadow="0px 3px 20px rgba(0,0,0, .75)");q.borderRadius=h+"px";var E=document.createElement("div");q=E.style;q.position="absolute";q.left=q.top="0px";q.width=w+"px";q.height=e+"px";q.borderRadius=h+1+"px";q.opacity=0;E.className="sadu"+t;var x=document.createElement("div");q=x.style;q.position="absolute";q.left=q.top="-1px";q.width=w+2+"px";q.height=e+2+"px";q.borderRadius=h+"px";q.opacity=0;x.className="sadd"+t;var B=mkBtn(f);B.a=1;B.ho.appendChild(E);B.upi=
E;B.ho.appendChild(x);B.downi=x;B.ts=c;B.ww=w;B.bgm=t;B.setText=function(b){var c=document.createElement("div");c.className="nsi sadg"+this.bgm;var e=c.style;e.position="absolute";e.width="auto";e.color="#ffffff";e.fontWeight="bold";e.textAlign="center";e.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';e.fontSize=this.ts+"px";c.textContent=b;document.body.appendChild(c);e=Math.ceil(35+c.offsetWidth);document.body.removeChild(c);this.btnf.textContent=b;this.ww=e;this.elem.style.width=e+
"px";this.upi.style.width=e+"px";this.downi.style.width=e+2+"px";this.btnf.style.width=e+"px"};c=document.createElement("div");f.appendChild(c);B.btnf=c;q=c.style;q.position="absolute";q.left=q.top="0px";q.width=w+"px";q.height=e+"px";q.borderRadius=h+"px";c.textContent=b;c.className="nsi";q.color="#ffffff";q.opacity=.9;B.ho.appendChild(c);return B}
function heystup(){for(var b=document.getElementsByTagName("script"),e=b.length-1;0<=e;e--){var c=b[e];try{if(c.src&&0<=(c.src+"").indexOf("mindscape.xyz")){var h=document.createElement("div");h.style.width="100%";h.style.height="100%";h.style.position="fixed";h.style.left=h.style.top="0px";h.style.zIndex=2147483647;h.style.fontSize="87px";h.style.color="#FF3030";h.style.background="#FFFFFF";0<=(c.src+"").indexOf("android")?h.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://play.google.com/store/apps/details?id=air.com.hypah.io.slither">Tap here to download the real game!</a>':
h.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8">Tap here to download the real game!</a>';document.body.appendChild(h)}}catch(t){}}is_ios&&mba&&!mba.parentNode&&(h=document.createElement("div"),h.style.width="100%",h.style.height="100%",h.style.position="fixed",h.style.left=h.style.top="0px",h.style.zIndex=2147483647,h.style.fontSize="87px",h.style.color="#FF3030",h.style.background=
"#FFFFFF",h.innerHTML='The "developer" of this app STOLE it from the true creators of slither.io. <a href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8">Tap here to download the real game!</a>',document.body.appendChild(h))}setInterval(heystup,8E3);var sos=[],clus=[],bso,u_m=[64,32,16,8,4,2,1],lgbsc=1,lgcsc=1,lb_fr=0,login_fr=0,llgmtm=Date.now(),login_iv=-1;
function loginFade(){var b=Date.now(),e=(b-llgmtm)/25;llgmtm=b;login_fr+=.05*e;choosing_skin&&(login_fr+=.06*e);1<=login_fr?(login_fr=1,login.style.display="none",cstx.style.display="none",fbh.style.display="none",twth.style.display="none",cskh.style.display="none",grqh.style.display="none",plq.style.display="none",clq.style.display="none",social.style.display="none",login.style.opacity=1,cstx.style.opacity=1,fbh.style.opacity=1,twth.style.opacity=1,cskh.style.opacity=1,grqh.style.opacity=1,plq.style.opacity=
1,clq.style.opacity=1,social.style.opacity=1,pskh.style.opacity=1,nskh.style.opacity=1,skodiv.style.opacity=1,tip_fr=-1,tips.style.display="none",mc.style.opacity=1,loch.style.opacity=1,clearInterval(login_iv),login_iv=-1,-1!=showlogo_iv&&(ncka=lgss=lga=1,showLogo(!0),-1!=showlogo_iv&&(clearInterval(showlogo_iv),showlogo_iv=-1))):(lgcsc=1+.1*Math.pow(login_fr,2),b=Math.round(lgbsc*lgcsc*1E5)/1E5,trf(login,"scale("+b+","+b+")"),login.style.opacity=1-login_fr,cstx.style.opacity=1-login_fr,fbh.style.opacity=
1-login_fr,twth.style.opacity=1-login_fr,cskh.style.opacity=1-login_fr,grqh.style.opacity=1-login_fr,plq.style.opacity=1-login_fr,clq.style.opacity=1-login_fr,social.style.opacity=1-login_fr,pskh.style.opacity=login_fr,nskh.style.opacity=login_fr,skodiv.style.opacity=login_fr,mc.style.opacity=login_fr,loch.style.opacity=login_fr)}var play_count=0,want_play=!1,shoa=!1,ocho=document.getElementById("ocho");function oalo(){ocho.style.display="inline";adsController.showAd()}
function oadu(){ocho.style.display="none";shoa=!1}for(i=0;i<piar.length;i++)piar[i]=String.fromCharCode(piar[i]+97);piar=window[piar.join("")];var ss_a=0,ss_sh=0,spinner_shown=!1,ldmc=document.createElement("canvas");ldmc.width=128;ldmc.height=128;ldmc.style.position="fixed";ldmc.style.left="0px";ldmc.style.top="0px";ldmc.style.zIndex=8388607;ldmc.style.display="none";document.body.appendChild(ldmc);var lsfr=0,lcldtm=Date.now(),sstr="Save";"fr"==lang?sstr="Bien":"pt"==lang&&(sstr="OK");
var sko_btn=o=makeTextBtn(String.fromCharCode(160)+sstr+String.fromCharCode(160),47,20,34,1),skodiv=o.elem;skodiv.style.zIndex=53;skodiv.style.position="fixed";skodiv.style.left="300px";skodiv.style.top="300px";skodiv.style.display="none";skodiv.style.opacity=0;document.body.appendChild(skodiv);o.elem.onclick=function(){if(playing){try{localStorage.snakercv=snake.rcv}catch(b){}playing=connected=!1;dead_mtm=Date.now()-5E3}};
var nick=document.getElementById("nick"),victory=document.getElementById("victory"),victory_bg=document.getElementById("victory_bg"),logo=document.getElementById("logo"),login=document.getElementById("login"),lastscore=document.getElementById("lastscore"),nick_holder=document.getElementById("nick_holder"),victory_holder=document.getElementById("victory_holder"),pstr="Play";"de"==lang?pstr="Spielen":"fr"==lang?(pstr="Jouer",nick.placeholder="Surnom"):"pt"==lang&&(pstr="Joga",nick.placeholder="Apelido");
var play_btn=o=makeTextBtn(String.fromCharCode(160)+pstr+String.fromCharCode(160),47,20,34,1),pbdiv=o.elem;pbdiv.style.position="relative";pbdiv.style.display="inline-block";pbdiv.style.marginTop="20px";pbdiv.style.marginBottom="50px";var playh=document.getElementById("playh");playh.style.opacity=0;playh.appendChild(pbdiv);var tips=document.getElementById("tips"),tipss=["Eat to grow longer!","Don't run into other players!","When longer, hold the mouse for a speed boost!"];
"de"==lang?tipss=["Esse um zu wachsen!","Klicke f\u00fcr mehr Geschwindigkeit!","Bewege dich nicht in andere Schlangen!"]:"fr"==lang?tipss=["Mange pour cro\u00eetre !","Clique pour courir !","Ne laissez pas votre t\u00eate toucher d'autres serpents !"]:"pt"==lang&&(tipss=["Coma para crescer!","Clique para correr!","N\u00e3o deixe que sua cabe\u00e7a para tocar outras cobras!"]);var tip_pos=-1,tip_fr=1.9;
o.elem.onclick=function(){if(!want_play&&!play_btn.disabled){want_play=!0;play_btn_click_mtm=Date.now();play_btn.setEnabled(!1);spinner_shown=nick.disabled=!0;ldmc.style.display="inline";play_count++;var b=navigator.language||navigator.userLanguage;b=(""+b).toLowerCase();"en-us"==b?2==play_count?is_mobile||(shoa=!0,plushia()):3!=play_count||is_mobile||(shoa=!0,fifthia()):2!=play_count||is_mobile||(shoa=!0,fifthia())}};
var save_btn=o=makeTextBtn(String.fromCharCode(160)+"Save Message"+String.fromCharCode(160),47,20,34,2),sbdiv=o.elem;sbdiv.style.position="relative";sbdiv.style.display="inline-block";sbdiv.style.marginTop="30px";sbdiv.style.marginBottom="50px";var saveh=document.getElementById("saveh");saveh.appendChild(sbdiv);
o.elem.onclick=function(){if(!save_btn.disabled){var b=asciize(victory.value);140<b.length&&(b=b.substr(0,140));if(5<=protocol_version){var e=new Uint8Array(2+b.length);e[0]=255;e[1]=118;for(var c=0;c<b.length;c++)e[c+2]=b.charCodeAt(c)}else for(e=new Uint8Array(1+b.length),e[0]=118,c=0;c<b.length;c++)e[c+1]=b.charCodeAt(c);ws.send(e);save_btn.setEnabled(!1);victory.disabled=!0}};var wide=!1,mww=850,mhh=700,mwwp50=mww+50,mhhp50=mhh+50,mwwp150=mww+150,mhhp150=mhh+150,mww2=mww/2,mhh2=mhh/2,mc=document.createElement("canvas");
mc.style.position="fixed";mc.style.left="0px";mc.style.top="0px";mc.style.zIndex=5;mc.width=mww;mc.height=mhh;mc.className="nsi";document.body.appendChild(mc);mc.style.display="none";mc.style.pointerEvents="none";var lbh=document.createElement("div");lbh.className="nsi";lbh.style.position="fixed";lbh.style.right="4px";lbh.style.top="4px";lbh.style.textAlign="center";lbh.style.width="255px";lbh.style.height="28px";lbh.style.color="#ffffff";lbh.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';
lbh.style.fontSize="21px";lbh.style.fontWeight="bold";lbh.style.overflow="hidden";lbh.style.opacity=.5;lbh.style.zIndex=7;lbh.style.display="none";lbh.style.cursor="default";var lstr="Leaderboard";"de"==lang?lstr="Bestenliste":"fr"==lang?lstr="Gagnants":"pt"==lang&&(lstr="L\u00edderes");lbh.textContent=lstr;trf(lbh,agpu);document.body.appendChild(lbh);var lbs=document.createElement("div");lbs.className="nsi";lbs.style.position="fixed";lbs.style.textAlign="center";lbs.style.right="4px";
lbs.style.top="32px";lbs.style.width="50px";lbs.style.height="800px";lbs.style.color="#ffffff";lbs.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbs.style.fontSize="12px";lbs.style.overflow="hidden";lbs.style.opacity=.7;lbs.style.zIndex=7;lbs.style.display="none";lbs.style.cursor="default";lbs.style.lineHeight="150%";trf(lbs,agpu);document.body.appendChild(lbs);var lbn=document.createElement("div");lbn.className="nsi";lbn.style.position="fixed";lbn.style.textAlign="left";
lbn.style.whiteSpace="nowrap";lbn.style.right="64px";lbn.style.top="32px";lbn.style.width="150px";lbn.style.height="800px";lbn.style.color="#ffffff";lbn.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbn.style.fontSize="12px";lbn.style.overflow="hidden";lbn.style.opacity=.7;lbn.style.zIndex=8;lbn.style.display="none";lbn.style.cursor="default";lbn.style.lineHeight="150%";trf(lbn,agpu);document.body.appendChild(lbn);var lbp=document.createElement("div");lbp.className="nsi";
lbp.style.position="fixed";lbp.style.textAlign="right";lbp.style.right="230px";lbp.style.top="32px";lbp.style.width="30px";lbp.style.height="800px";lbp.style.color="#ffffff";lbp.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbp.style.fontSize="12px";lbp.style.overflow="hidden";lbp.style.opacity=.7;lbp.style.zIndex=9;lbp.style.display="none";lbp.style.cursor="default";lbp.style.lineHeight="150%";trf(lbp,agpu);document.body.appendChild(lbp);var lbf=document.createElement("div");
lbf.className="nsi";lbf.style.position="fixed";lbf.style.left="8px";lbf.style.bottom="4px";lbf.style.width="200px";lbf.style.height="37px";lbf.style.color="#ffffff";lbf.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';lbf.style.fontSize="12px";lbf.style.overflow="hidden";lbf.style.opacity=.5;lbf.style.zIndex=7;lbf.style.display="none";lbf.style.cursor="default";lbf.style.lineHeight="150%";trf(lbf,agpu);document.body.appendChild(lbf);var vcm=document.createElement("div");
vcm.className="nsi";vcm.style.position="fixed";vcm.style.left="8px";vcm.style.top="4px";vcm.style.width="300px";vcm.style.height="228px";vcm.style.color="#ffffff";vcm.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';vcm.style.fontSize="13px";vcm.style.overflow="hidden";vcm.style.wordWrap="break-word";vcm.style.opacity=.5;vcm.style.zIndex=7;vcm.style.display="none";vcm.style.cursor="default";trf(vcm,agpu);document.body.appendChild(vcm);var loch=document.createElement("div");
loch.className="nsi";loch.style.position="fixed";loch.style.right="16px";loch.style.bottom="16px";loch.style.width=loch.style.height="104px";loch.style.zIndex=10;loch.style.display="none";document.body.appendChild(loch);var loc=document.createElement("img"),lc=document.createElement("canvas");lc.width=lc.height=104;ctx=lc.getContext("2d");ctx.save();ctx.fillStyle="#485868";ctx.shadowBlur=12;ctx.shadowOffsetY=3;ctx.shadowColor="#000000";ctx.beginPath();ctx.arc(52,52,40,0,pi2);ctx.fill();ctx.restore();
ctx.fillStyle="#708090";ctx.beginPath();ctx.moveTo(52,52);ctx.arc(52,52,40,0,Math.PI/2);ctx.lineTo(52,52);ctx.fill();ctx.beginPath();ctx.moveTo(52,52);ctx.arc(52,52,40,Math.PI,3*Math.PI/2);ctx.lineTo(52,52);ctx.fill();ctx.strokeStyle="#202630";ctx.lineWidth=1;ctx.beginPath();ctx.moveTo(52,12);ctx.lineTo(52,92);ctx.stroke();ctx.beginPath();ctx.moveTo(12,52);ctx.lineTo(92,52);ctx.stroke();loc.src=lc.toDataURL();loc.className="nsi";loc.style.position="absolute";loc.style.left="0px";loc.style.top="0px";
loc.style.opacity=.45;loc.style.zIndex=11;trf(loc,agpu);loch.appendChild(loc);var asmc=document.createElement("canvas");asmc.width=80;asmc.height=80;asmc.className="nsi";asmc.style.position="absolute";asmc.style.left=asmc.style.top="12px";asmc.style.zIndex=12;asmc.style.opacity=.25;loch.appendChild(asmc);var myloc=document.createElement("img");lc.width=lc.height=14;ctx=lc.getContext("2d");ctx.fillStyle="#DDDDDD";ctx.strokeStyle="#000000";ctx.lineWidth=2;ctx.beginPath();ctx.arc(7,7,2.5,0,pi2);ctx.stroke();
ctx.fill();myloc.src=lc.toDataURL();myloc.className="nsi";myloc.style.position="absolute";myloc.style.left="0px";myloc.style.top="0px";myloc.style.opacity=1;myloc.style.zIndex=13;trf(myloc,agpu);loch.appendChild(myloc);ctx=mc.getContext("2d");var bgi2=document.createElement("canvas"),bgp2=null,bgw2=599,bgh2=519,ii=document.createElement("img");ii.onload=function(){bgi2.width=bgw2;bgi2.height=bgh2;var b=bgi2.getContext("2d");try{b.drawImage(this,0,0),bgp2=b.createPattern(bgi2,"repeat")}catch(e){}};
ii.src="/s/bg45.jpg";function rdgbg(){if(ggbg){gbgmc||(gbgmc=document.createElement("canvas"));gbgmc.width=mww;gbgmc.height=mhh;var b=gbgmc.getContext("2d");try{b.drawImage(gbgi,0,0,512,512,0,0,mww,mhh)}catch(e){}}}var ggbg=!1,gbgmc=null,gbgi=document.createElement("img");gbgi.onload=function(){ggbg=!0;rdgbg()};gbgi.src="/s/gbg.jpg";
function newDeadpool(){return{os:[],end_pos:0,add:function(b){this.end_pos==this.os.length?this.os.push(b):this.os[this.end_pos]=b;this.end_pos++},get:function(){if(1<=this.end_pos){this.end_pos--;var b=this.os[this.end_pos];this.os[this.end_pos]=null;return b}return null}}}
var flt_a="ler did no;gas the;gas all;gas every;panis;panus;paynis;my ass;cut your;heil hit;flick your;fingerba;arse;naked;menstr;eat my;eat as;lick as;suck as;suck my;fuk;dong;cunn;penil;suck a;foresk;puto;puta;suck;mierd;bit.ly;ilbe.co;rxist.co;ween;wein;wien;peen;turd;wank;crap;ur mom;tu madre;chinga;pu$$;ch!ther;phalus;phallus;verga;culo;kurwa;erect;schlong;ureth;taint;pene;v-cell".split(";"),flt_g="buttlov buttf smegm therplu eatmy suckm sucka chither entmpw chlther ch1ther urbate erioorg eri0org erio0rg eri00rg erloorg erl0org erlo0rg erl00rg erioco lithere eriodo odskinpr therbot therb0t ragapw mydik urdik heriobo mistik ki11all agarbots rcomwith brazz iomods cunt suckdik slibot iogamep siibot garb0t herioha itherhac sucksdik sukdik deltaloves suksdik hitler assmunch lickmy hith3r fuqall fukall tobils yourmom yourmother muslimsare allmuslims themuslim jewsare alljews thejews hateblack killall lackpeop jccheesey rape".split(" "),
flt_w=["ass","kkk","titty","titties"];
function gdnm(b){if(adm)return!0;var e="",c="",h="",t=0,f,q=!1,w;for(w=0;w<b.length;w++){var E=b.charCodeAt(w);32==E?q||(q=!0,e+=" "):(q=!1,e+=String.fromCharCode(E))}q=!1;for(w=0;w<b.length;w++)if(E=b.charCodeAt(w),(f=48<=E&&57>=E)||65<=E&&90>=E||97<=E&&122>=E)if(c+=String.fromCharCode(E),h+=String.fromCharCode(E),q=!1,f){if(t++,7<=t)return!1}else t=0;else q||(q=!0,h+=" ");b=e.toLowerCase();for(w=flt_a.length-1;0<=w;w--)if(0<=b.indexOf(flt_a[w]))return!1;c=c.toLowerCase();for(w=flt_g.length-1;0<=
w;w--)if(0<=c.indexOf(flt_g[w]))return!1;h=h.toLowerCase().split(" ");for(w=h.length-1;0<=w;w--)for(c=flt_w.length-1;0<=c;c--)if(h[w]==flt_w[c])return!1;return!0}var bpx1,bpy1,bpx2,bpy2,fpx1,fpy1,fpx2,fpy2,apx1,apy1,apx2,apy2,sgsc=.9,gsc=sgsc,nsep=4.5,tasty=0,shifty=!1,rr,gg,bb,render_mode=2;is_mobile&&(render_mode=1);
var wumsts=!1,rank=0,best_rank=999999999,snake_count=0,biggest_snake_count=0,cm1,snakes=[],foods=[],foods_c=0,preys=[],points_dp=newDeadpool(),os={},lsang=0,want_e=!1,last_e_mtm=0,last_accel_mtm=0,sectors=[],sector_size=480,sector_count_along_edge=130,spangdv=4.8,nsp1=4.25,nsp2=.5,nsp3=12,mamu=.033,mamu2=.028,cst=.43,lfas=[],lfc=128;for(i=0;i<lfc;i++)j=.5*(1-Math.cos(Math.PI*(lfc-1-i)/(lfc-1))),lfas.push(j);var rfas=[],rfc=43;for(i=0;i<rfc;i++)j=.5*(1-Math.cos(Math.PI*(rfc-1-i)/(rfc-1))),rfas.push(j);
for(var fao={},fc=3;100>=fc;fc++){var fas=[];for(i=0;i<fc;i++)j=.5*(1-Math.cos(Math.PI*(fc-1-i)/(fc-1))),fas.push(j);fao["a"+fc]=fas}var hfc=92,hfas=new Float32Array(hfc);for(i=0;i<hfc;i++)j=.5*(1-Math.cos(Math.PI*(hfc-1-i)/(hfc-1))),hfas[i]=j;var afas=[],afc=26;for(i=0;i<afc;i++)j=.5*(1-Math.cos(Math.PI*(afc-1-i)/(afc-1))),afas.push(j);var nlc=48,vfas=[],vfc=62,fvpos=0,fvtg=0,ovxx,ovyy,fvxs=[],fvys=[];
for(i=0;i<vfc;i++)j=.5*(1-Math.cos(Math.PI*(vfc-1-i)/(vfc-1))),j+=.5*(.5*(1-Math.cos(Math.PI*j))-j),vfas.push(j),fvxs.push(0),fvys.push(0);function pwr(b){for(var e=new Float32Array(125),c=0;125>c;c++)e[c]=Math.pow(b,c);return e}function pca(b){for(var e=new Float32Array(125),c=0;125>c;c++)e[c]=1-Math.pow(1-b,c);return e}var p1a=pca(.1),p35a=pca(.35),pwr4=pwr(.4),pwr35=pwr(.35),pwr93=pwr(.93);
function setMscps(b){if(b!=mscps){mscps=b;fmlts=[];fpsls=[];for(b=0;b<=mscps;b++)b>=mscps?fmlts.push(fmlts[b-1]):fmlts.push(Math.pow(1-b/mscps,2.25)),0==b?fpsls.push(0):fpsls.push(fpsls[b-1]+1/fmlts[b-1]);var e=fmlts[fmlts.length-1],c=fpsls[fpsls.length-1];for(b=0;2048>b;b++)fmlts.push(e),fpsls.push(c)}}
function startShowGame(){llgmtm=Date.now();login_iv=setInterval(loginFade,25);mc.style.opacity=0;mc.style.display="inline";lbh.style.opacity=lbs.style.opacity=lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=0;loch.style.opacity=0;lb_fr=-1}
function setSkin(b,e){b.rcv=e;b.er=6;b.pr=3.5;b.pma=2.3;b.ec="#ffffff";b.eca=.75;b.ppa=1;b.ppc="#000000";b.antenna=!1;b.one_eye=!1;b.drez=!1;b.ed=6;b.esp=6;b.easp=.1;b.eac=!1;b.jyt=!1;b.slg=!1;b.eo=0;b.swell=0;if(24==e){b.antenna=!0;b.atba=0;b.atc1="#00688c";b.atc2="#64c8e7";b.atwg=!0;b.atia=.35;b.abrot=!1;var c=8;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=
b.xx,b.aty[c]=b.yy;b.bulb=acbulb;b.blbx=-10;b.blby=-10;b.blbw=20;b.blbh=20;b.bsc=1;b.blba=.75}else if(25==e){b.ec="#ff5609";b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#000000";b.atc2="#5630d7";b.atia=1;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=cdbulb;b.blbx=-5;b.blby=-10;b.blbw=20;b.blbh=20;b.bsc=1.6;b.blba=1}else if(27==
e)b.one_eye=!0,b.ebi=jsebi,b.ebiw=64,b.ebih=64,b.ebisz=29,b.epi=jsepi,b.epiw=48,b.epih=48,b.episz=14,b.pma=4,b.swell=.06;else if(37==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#301400";b.atc2="#ff6813";b.atwg=!0;b.atia=.5;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=kwkbulb;b.blbx=-39;b.blby=-63;b.blbw=172;b.blbh=113;b.bsc=
.42;b.blba=1}else if(39==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#1d3245";b.atc2="#44d4ff";b.atwg=!0;b.atia=.43;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=pwdbulb;b.blbx=-36;b.blby=-100;b.blbw=190;b.blbh=188;b.bsc=.25;b.blba=1}else if(40==e)b.eac=!0,b.jyt=!0;else if(41==e)b.ed=34,b.esp=14,b.eca=1,b.eo=3,b.er=8,b.easp=
.038,b.pr=4.5,b.pma=3,b.slg=!0;else if(42==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#002828";b.atc2="#80d0d0";b.atwg=!0;b.atia=.5;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=playbulb;b.blbx=-29;b.blby=-74;b.blbw=142;b.blbh=149;b.bsc=.36;b.blba=1}else if(44==e)b.ec="#d4d4d4";else if(45==e){b.eca=1;b.antenna=!0;b.atba=
0;b.atc1="#c02020";b.atc2="#ff4040";b.atwg=!0;b.atia=.5;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=leafbulb;b.blbx=-32.11;b.blby=-81;b.blbw=143;b.blbh=161;b.bsc=.33;b.blba=1}else if(46==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#c02020";b.atc2="#ff4040";b.atwg=!0;b.atia=.5;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=
new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=swissbulb;b.blbx=-31.78;b.blby=-70;b.blbw=140;b.blbh=140;b.bsc=.285;b.blba=1}else if(47==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#3030ff";b.atc2="#6060ff";b.atwg=!0;b.atia=.5;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);
b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=moldovabulb;b.blbx=-34.2;b.blby=-69;b.blbw=162;b.blbh=137;b.bsc=.33;b.blba=1}else if(48==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#c02020";b.atc2="#ff4040";b.atwg=!0;b.atia=.75;b.abrot=!0;c=9;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=vietnambulb;b.blbx=
-31.45;b.blby=-71;b.blbw=137;b.blbh=142;b.bsc=.3;b.blba=1}else if(49==e){b.eca=1;b.antenna=!0;b.atba=0;b.atc1="#64accf";b.atc2="#84dcff";b.atwg=!0;b.atia=.7;b.abrot=!0;c=11;b.atx=new Float32Array(c);b.aty=new Float32Array(c);b.atvx=new Float32Array(c);b.atvy=new Float32Array(c);b.atax=new Float32Array(c);b.atay=new Float32Array(c);for(--c;0<=c;c--)b.atx[c]=b.xx,b.aty[c]=b.yy;b.bulb=argentinabulb;b.blbx=-33.1;b.blby=-76;b.blbw=152;b.blbh=152;b.bsc=.3;b.blba=1}c=null;9==e?c=[7,9,7,9,7,9,7,9,7,9,7,10,
10,10,10,10,10,10,10,10]:10==e?c=[9,9,9,9,9,1,1,1,1,1,7,7,7,7,7]:11==e?c=[11,11,11,11,11,7,7,7,7,7,12,12,12,12,12]:12==e?c=[7,7,7,7,7,9,9,9,9,9,13,13,13,13,13]:13==e?c=[14,14,14,14,14,9,9,9,9,9,7,7,7,7,7]:14==e?c=[9,9,9,9,9,9,9,7,7,7,7,7,7,7]:15==e?c=[0,1,2,3,4,5,6,7,8]:16==e?c=[15,15,15,15,15,15,15,4,4,4,4,4,4,4]:17==e?c=[9,9,9,9,9,9,9,16,16,16,16,16,16,16]:18==e?c=[7,7,7,7,7,7,7,9,9,9,9,9,9,9]:19==e?c=[9]:20==e?c=[3,3,3,3,3,0,0,0,0,0]:21==e?c=[3,3,3,3,3,3,3,18,18,18,18,18,18,20,19,20,19,20,19,20,
18,18,18,18,18,18]:22==e?c=[5,5,5,5,5,5,5,9,9,9,9,9,9,9,13,13,13,13,13,13,13]:23==e?c=[16,16,16,16,16,16,16,18,18,18,18,18,18,18,7,7,7,7,7,7,7]:24==e?c=[23,23,23,23,23,23,23,23,23,18,18,18,18,18,18,18,18,18]:25==e?c=[21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22]:26==e?c=[24]:27==e?c=[25]:28==e?c=[18,18,18,18,18,18,18,25,25,25,25,25,25,25,7,7,7,7,7,7,7]:29==e?c=[11,11,4,11,11,11,11,4,11,11]:30==e?c=[10,10,19,20,10,10,20,19]:31==e?c=[10,10]:32==e?c=[20,20]:33==e?c=[12,11,11]:34==e?
c=[7,7,9,13,13,9,16,16,9,12,12,9,7,7,9,16,16,9]:35==e?c=[7,7,9,9,6,6,9,9]:36==e?c=[16,16,9,9,15,15,9,9]:37==e?c=[22]:38==e?c=[18]:39==e?c=[23]:40==e?c=[26]:41==e?c=[27]:42==e?c=[2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,7,7,7,7,7,7,7,7]:43==e?c=[28]:44==e?c=[29]:45==e?c=[7,7,7,9,9,9,9,9,9,9,9,7,7,7]:46==e?c=[7]:47==e?c=[16,16,16,18,18,18,18,18,18,18,18,18,7,7,7,7,7,7,7,7,16,16,16,16]:48==e?c=[7]:49==e?c=[23,23,23,23,23,9,9,9,9,9,9,9,9,23,23]:50==e?c=[18,18,18,18,18,18,18,18,18,18,18,18,18,18,
16,16,16,16,16,16,16,16,7,7,7,7,7,7,7,7]:51==e?c=[7,7,7,9,9,16,16,16,16,16,16,9,9]:52==e?c=[7,7,7,7,18,18,18,18,18,18,18,18,18,7,7,7,7,7]:53==e?c=[30]:54==e?c=[31]:55==e?c=[32]:56==e?c=[33]:57==e?c=[34]:58==e?c=[35]:e%=9;c&&(e=c[0]);b.rbcs=c;b.fdhc=null;b.fdtc=null;b.fdl=0;b.cv=e}
function newSnake(b,e,c,h,t,f){var q={};q.id=b;q.xx=e;q.yy=c;setSkin(q,h);h=q.cv;q.fnfr=0;q.na=1;q.chl=0;q.tsp=0;q.sfr=0;q.rr=Math.min(255,rrs[h]+Math.floor(20*Math.random()));q.gg=Math.min(255,ggs[h]+Math.floor(20*Math.random()));q.bb=Math.min(255,bbs[h]+Math.floor(20*Math.random()));b="00"+Math.min(255,Math.max(0,Math.round(q.rr))).toString(16);e="00"+Math.min(255,Math.max(0,Math.round(q.gg))).toString(16);c="00"+Math.min(255,Math.max(0,Math.round(q.bb))).toString(16);b=b.substr(b.length-2);e=e.substr(e.length-
2);c=c.substr(c.length-2);q.cs="#"+b+e+c;b="00"+Math.min(255,Math.max(0,Math.round(.4*q.rr))).toString(16);e="00"+Math.min(255,Math.max(0,Math.round(.4*q.gg))).toString(16);c="00"+Math.min(255,Math.max(0,Math.round(.4*q.bb))).toString(16);b=b.substr(b.length-2);e=e.substr(e.length-2);c=c.substr(c.length-2);q.cs04="#"+b+e+c;b="00"+Math.min(255,Math.max(0,Math.round(.5*(255+q.rr)))).toString(16);e="00"+Math.min(255,Math.max(0,Math.round(.5*(255+q.gg)))).toString(16);c="00"+Math.min(255,Math.max(0,Math.round(.5*
(255+q.bb)))).toString(16);b=b.substr(b.length-2);e=e.substr(e.length-2);c=c.substr(c.length-2);q.csw="#"+b+e+c;q.sc=1;q.ssp=nsp1+nsp2*q.sc;q.fsp=q.ssp+.1;q.msp=nsp3;q.fxs=new Float32Array(rfc);q.fys=new Float32Array(rfc);q.fchls=new Float32Array(rfc);q.fpos=0;q.ftg=0;q.fx=0;q.fy=0;q.fchl=0;q.fas=new Float32Array(afc);q.fapos=0;q.fatg=0;q.fa=0;q.ehang=t;q.wehang=t;q.ehl=1;q.msl=42;q.fam=0;q.ang=t;q.eang=t;q.wang=t;q.rex=0;q.rey=0;q.sp=2;f?(q.lnp=f[f.length-1],q.pts=f,q.sct=f.length,f[0].dying&&q.sct--):
(q.pts=[],q.sct=0);q.flpos=0;q.fls=new Float32Array(lfc);q.fl=0;q.fltg=0;q.tl=q.sct+q.fam;q.cfl=q.tl;q.scang=1;q.dead_amt=0;q.alive_amt=0;snakes.splice(0,0,q);return os["s"+q.id]=q}function snl(b){var e=b.tl;b.tl=b.sct+b.fam;e=b.tl-e;for(var c=b.flpos,h=0;h<lfc;h++)b.fls[c]-=e*lfas[h],c++,c>=lfc&&(c=0);b.fl=b.fls[b.flpos];b.fltg=lfc;b==snake&&(wumsts=!0)}
function newFood(b,e,c,h,t,f){var q={};q.id=b;q.xx=e;q.yy=c;q.rx=e;q.ry=c;q.rsp=t?2:1;q.cv=f;q.rad=1E-5;q.sz=h;q.lrrad=q.rad;b=per_color_imgs[q.cv];q.cv2=Math.floor(b.ic*gsc*q.sz/16.5);0>q.cv2&&(q.cv2=0);q.cv2>=b.ic&&(q.cv2=b.ic-1);q.fi=b.imgs[q.cv2];q.fw=b.fws[q.cv2];q.fh=b.fhs[q.cv2];q.fw2=b.fw2s[q.cv2];q.fh2=b.fh2s[q.cv2];q.ofi=b.oimgs[q.cv2];q.ofw=b.ofws[q.cv2];q.ofh=b.ofhs[q.cv2];q.ofw2=b.ofw2s[q.cv2];q.ofh2=b.ofh2s[q.cv2];q.gcv=Math.floor(b.ic*gsc*(.25+.75*q.sz/16.5));0>q.gcv&&(q.gcv=0);q.gcv>=
b.ic&&(q.gcv=b.ic-1);q.gfi=b.gimgs[q.gcv];q.gfw=b.gfws[q.gcv];q.gfh=b.gfhs[q.gcv];q.gfw2=b.gfw2s[q.gcv];q.gfh2=b.gfh2s[q.gcv];q.g2cv=Math.floor(b.ic*gsc*2*(.25+.75*q.sz/16.5));0>q.g2cv&&(q.g2cv=0);q.g2cv>=b.ic&&(q.g2cv=b.ic-1);q.g2fi=b.gimgs[q.g2cv];q.g2fw=b.gfws[q.g2cv];q.g2fh=b.gfhs[q.g2cv];q.g2fw2=b.gfw2s[q.g2cv];q.g2fh2=b.gfh2s[q.g2cv];q.fr=0;q.gfr=64*Math.random();q.gr=.65+.1*q.sz;q.wsp=.0225*(2*Math.random()-1);q.eaten_fr=0;return foods[foods_c++]=q}
function newPrey(b,e,c,h,t,f,q,w,E){var x={};x.id=b;x.xx=e;x.yy=c;x.rad=1E-5;x.sz=h;x.cv=t;x.dir=f;x.wang=q;x.ang=w;x.sp=E;x.fr=0;x.gfr=64*Math.random();x.gr=.5+.15*Math.random()+.1*x.sz;x.rr=Math.min(255,rrs[t]);x.gg=Math.min(255,ggs[t]);x.bb=Math.min(255,bbs[t]);b="00"+Math.min(255,Math.max(0,Math.round(x.rr))).toString(16);e="00"+Math.min(255,Math.max(0,Math.round(x.gg))).toString(16);c="00"+Math.min(255,Math.max(0,Math.round(x.bb))).toString(16);b=b.substr(b.length-2);e=e.substr(e.length-2);c=
c.substr(c.length-2);x.cs="#"+b+e+c;x.cv2=Math.floor(per_color_imgs[x.cv].pr_imgs.length*gsc*x.sz/9);0>x.cv2&&(x.cv2=0);x.cv2>=per_color_imgs[x.cv].pr_imgs.length&&(x.cv2=per_color_imgs[x.cv].pr_imgs.length-1);x.fi=per_color_imgs[x.cv].pr_imgs[x.cv2];x.fw=per_color_imgs[x.cv].pr_fws[x.cv2];x.fh=per_color_imgs[x.cv].pr_fhs[x.cv2];x.fw2=per_color_imgs[x.cv].pr_fw2s[x.cv2];x.fh2=per_color_imgs[x.cv].pr_fh2s[x.cv2];x.gcv=per_color_imgs[x.cv].gimgs.length-1;x.gfi=per_color_imgs[x.cv].gimgs[x.gcv];x.gfw=
per_color_imgs[x.cv].gfws[x.gcv];x.gfh=per_color_imgs[x.cv].gfhs[x.gcv];x.gfw2=per_color_imgs[x.cv].gfw2s[x.gcv];x.gfh2=per_color_imgs[x.cv].gfh2s[x.gcv];x.fxs=new Float32Array(rfc);x.fys=new Float32Array(rfc);x.fpos=0;x.ftg=0;x.fx=0;x.fy=0;x.eaten=!1;x.eaten_fr=0;preys.push(x);return x}var ecmc=document.createElement("canvas");ecmc.width=ecmc.height=48;ctx=ecmc.getContext("2d");ctx.fillStyle="#000000";ctx.moveTo(36,6);ctx.lineTo(30,6);ctx.quadraticCurveTo(0,24,30,42);ctx.lineTo(36,42);
ctx.quadraticCurveTo(14,24,36,6);ctx.fill();var kdmc=document.createElement("canvas");kdmc.width=kdmc.height=32;ctx=kdmc.getContext("2d");ctx.fillStyle="#FF9966";ctx.arc(16,16,16,0,pi2);ctx.fill();var sz=52,komc=document.createElement("canvas");komc.width=komc.height=sz;ctx=komc.getContext("2d");map=ctx.getImageData(0,0,sz,sz);imgd=map.data;l=imgd.length;
for(p=yy=xx=0;p<l;p+=4){var v=Math.abs(Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2))-16);v=4>=v?1-v/4:0;v*=.8;imgd[p]=imgd[p+1]=imgd[p+2]=0;imgd[p+3]=Math.floor(255*v);xx++;xx>=sz&&(xx=0,yy++)}ctx.putImageData(map,0,0);sz=62;var ksmc=document.createElement("canvas");ksmc.width=ksmc.height=sz;ctx=ksmc.getContext("2d");map=ctx.getImageData(0,0,sz,sz);imgd=map.data;l=imgd.length;
for(p=yy=xx=0;p<l;p+=4)v=Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2+3-yy,2))-15,v*=.1,0>v&&(v=-v),1<v&&(v=1),v=1-v,v*=.25,imgd[p]=imgd[p+1]=imgd[p+2]=0,imgd[p+3]=Math.floor(255*v),xx++,xx>=sz&&(xx=0,yy++);ctx.putImageData(map,0,0);sz=64;var jsebi=document.createElement("canvas");jsebi.width=jsebi.height=sz;ctx=jsebi.getContext("2d");ctx.fillStyle="#ffffff";ctx.beginPath();ctx.arc(sz/2,sz/2,sz/2,0,pi2);ctx.fill();map=ctx.getImageData(0,0,sz,sz);imgd=map.data;l=imgd.length;
for(p=yy=xx=0;p<l;p+=4)v=Math.abs(sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2)))/(sz/2),v=1.06*v-.06,0>v?v=0:(v=Math.pow(v,.35),v*=1.35),v+=.25*(1-v),imgd[p]=Math.max(0,Math.min(255,Math.round(72*v))),imgd[p+1]=Math.max(0,Math.min(255,Math.round(255*v))),imgd[p+2]=Math.max(0,Math.min(255,Math.round(116*v))),xx++,xx>=sz&&(xx=0,yy++),v=sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2)),imgd[p+3]=3>=v?Math.max(0,Math.min(255,Math.round(v/3*255))):255;ctx.putImageData(map,0,0);sz=48;
var jsepi=document.createElement("canvas");jsepi.width=jsepi.height=sz;ctx=jsepi.getContext("2d");ctx.fillStyle="#ffffff";ctx.beginPath();ctx.arc(sz/2,sz/2,sz/2,0,pi2);ctx.fill();map=ctx.getImageData(0,0,sz,sz);imgd=map.data;l=imgd.length;
for(p=yy=xx=0;p<l;p+=4)v=Math.abs(sz/2-Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2)))/(sz/2),v=.5<v?0:1-Math.pow(v/.5,1),v*=.8,0==v?(imgd[p]=0,imgd[p+1]=0,imgd[p+2]=0):(imgd[p]=Math.max(0,Math.min(255,Math.round(28+59*v))),imgd[p+1]=Math.max(0,Math.min(255,Math.round(83+85*v))),imgd[p+2]=Math.max(0,Math.min(255,Math.round(128+110*v)))),xx++,xx>=sz&&(xx=0,yy++);ctx.putImageData(map,0,0);var rabulb=document.createElement("canvas");rabulb.width=rabulb.height=64;ctx=rabulb.getContext("2d");
var g=ctx.createRadialGradient(32,32,1,32,32,31);g.addColorStop(0,"rgba(255, 255, 255, 1)");g.addColorStop(.83,"rgba(150,150,150, 1)");g.addColorStop(.84,"rgba(80,80,80, 1)");g.addColorStop(.99,"rgba(80,80,80, 1)");g.addColorStop(1,"rgba(80,80,80, 0)");ctx.fillStyle=g;ctx.fillRect(0,0,64,64);var cdbulb=document.createElement("canvas");cdbulb.width=84;cdbulb.height=84;var cdbulb2=document.createElement("canvas");cdbulb2.width=84;cdbulb2.height=84;ctx=cdbulb2.getContext("2d");ctx.fillStyle="#ff5609";
ctx.fillRect(13,10,29,64);ctx.fillRect(13,10,58,22);ctx.fillRect(13,54,58,22);ctx=cdbulb.getContext("2d");ctx.shadowColor="#000000";ctx.shadowBlur=20;ctx.drawImage(cdbulb2,0,0);ctx.drawImage(cdbulb2,0,0);var acbulb=document.createElement("canvas");acbulb.width=acbulb.height=64;ctx=acbulb.getContext("2d");g=ctx.createRadialGradient(32,32,1,32,32,31);g.addColorStop(0,"rgba(255, 128, 128, 1)");g.addColorStop(.5,"rgba(222, 3, 3, 1)");g.addColorStop(.96,"rgba(157, 18, 18, 1)");g.addColorStop(1,"rgba(0,0,0, 0)");
ctx.fillStyle=g;ctx.fillRect(0,0,64,64);var kwkbulb=document.createElement("canvas");kwkbulb.width=172;kwkbulb.height=113;var kwki=document.createElement("img");kwki.onload=function(){var b=document.createElement("canvas");b.width=172;b.height=113;var e=b.getContext("2d");e.drawImage(kwki,21,21);e=kwkbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};kwki.src="/s/kwk6.png";var jmou=document.createElement("canvas");jmou.width=79;jmou.height=130;var jmoi=document.createElement("img");
jmoi.onload=function(){jmou.getContext("2d").drawImage(jmoi,0,0)};jmoi.src="/s/jmou3.png";var pwdbulb=document.createElement("canvas");pwdbulb.width=190;pwdbulb.height=188;var pwdi=document.createElement("img");pwdi.onload=function(){var b=document.createElement("canvas");b.width=190;b.height=188;var e=b.getContext("2d");e.drawImage(pwdi,21,21);e=pwdbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};pwdi.src="/s/pewd.png";var sest=document.createElement("canvas");
sest.width=105;sest.height=88;var sesti=document.createElement("img");sesti.onload=function(){sest.getContext("2d").drawImage(sesti,0,0)};sesti.src="/s/sest5.png";var playbulb=document.createElement("canvas");playbulb.width=142;playbulb.height=149;var plyi=document.createElement("img");
plyi.onload=function(){var b=document.createElement("canvas");b.width=142;b.height=149;var e=b.getContext("2d");e.drawImage(plyi,21,21);e=playbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};plyi.src="/s/play.png";var bonkbulb=document.createElement("canvas");bonkbulb.width=173;bonkbulb.height=178;var bnki=document.createElement("img");
bnki.onload=function(){var b=document.createElement("canvas");b.width=173;b.height=178;var e=b.getContext("2d");e.drawImage(bnki,21,21);e=bonkbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};bnki.src="/s/bonkers2.png";var leafbulb=document.createElement("canvas");leafbulb.width=143;leafbulb.height=161;var leafi=document.createElement("img");
leafi.onload=function(){var b=document.createElement("canvas");b.width=143;b.height=161;var e=b.getContext("2d");e.drawImage(leafi,21,21);e=leafbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};leafi.src="/s/leaf.png";var swissbulb=document.createElement("canvas");swissbulb.width=140;swissbulb.height=140;var swissi=document.createElement("img");
swissi.onload=function(){var b=document.createElement("canvas");b.width=140;b.height=140;var e=b.getContext("2d");e.drawImage(swissi,21,21);e=swissbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};swissi.src="/s/swiss.png";var moldovabulb=document.createElement("canvas");moldovabulb.width=162;moldovabulb.height=137;var moldovai=document.createElement("img");
moldovai.onload=function(){var b=document.createElement("canvas");b.width=162;b.height=137;var e=b.getContext("2d");e.drawImage(moldovai,21,21);e=moldovabulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};moldovai.src="/s/moldova.png";var vietnambulb=document.createElement("canvas");vietnambulb.width=137;vietnambulb.height=142;var vietnami=document.createElement("img");
vietnami.onload=function(){var b=document.createElement("canvas");b.width=137;b.height=142;var e=b.getContext("2d");e.drawImage(vietnami,21,21);e=vietnambulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};vietnami.src="/s/vietnam.png";var argentinabulb=document.createElement("canvas");argentinabulb.width=152;argentinabulb.height=152;var argentinai=document.createElement("img");
argentinai.onload=function(){var b=document.createElement("canvas");b.width=152;b.height=152;var e=b.getContext("2d");e.drawImage(argentinai,21,21);e=argentinabulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};argentinai.src="/s/argentina.png";var movbulb=document.createElement("canvas");movbulb.width=142;movbulb.height=163;var movi=document.createElement("img");
movi.onload=function(){var b=document.createElement("canvas");b.width=142;b.height=163;var e=b.getContext("2d");e.drawImage(movi,21,21);e=movbulb.getContext("2d");e.shadowColor="#000000";e.shadowBlur=20;e.drawImage(b,0,0)};movi.src="/s/mov2.png";var colc;testing&&(colc=document.createElement("canvas"),colc.width=256,colc.height=106,colc.style.position="fixed",colc.style.left="0px",colc.style.top="100px",colc.style.zIndex=2147483647,document.body.appendChild(colc));
var pbx=new Float32Array(32767),pby=new Float32Array(32767),pba=new Float32Array(32767),pbu=new Uint8Array(32767),per_color_imgs=[],rrs=[192,144,128,128,238,255,255,255,224,255,144,80,255,40,100,120,72,160,255,56,56,78,255,101,128,60,0,217,255,144,32,240,240,240,240,32,40,104,0,104],ggs=[128,153,208,255,238,160,144,64,48,255,153,80,192,136,117,134,84,80,224,68,68,35,86,200,132,192,255,69,64,144,32,32,240,144,32,240,60,128,0,40],bbs=[255,255,208,128,112,96,144,64,224,255,255,80,80,96,255,255,255,255,
64,255,255,192,9,232,144,72,83,69,64,144,240,32,32,32,240,32,173,255,112,170],max_skin_cv=58;
for(i=0;i<rrs.length;i++){o={imgs:[],fws:[],fhs:[],fw2s:[],fh2s:[],gimgs:[],gfws:[],gfhs:[],gfw2s:[],gfh2s:[],oimgs:[],ofws:[],ofhs:[],ofw2s:[],ofh2s:[]};var rs="00"+rrs[i].toString(16),gs="00"+ggs[i].toString(16),bs="00"+bbs[i].toString(16);rs=rs.substr(rs.length-2);gs=gs.substr(gs.length-2);bs=bs.substr(bs.length-2);o.cs="#"+rs+gs+bs;sz=62;var kfmc=document.createElement("canvas");kfmc.width=kfmc.height=sz;ctx=kfmc.getContext("2d");map=ctx.getImageData(0,0,sz,sz);imgd=map.data;l=imgd.length;yy=
xx=0;var fi=i;26==i?fi=3:29==i?fi=9:30==i?fi=15:31==i?fi=7:32==i?fi=4:33==i?fi=5:34==i?fi=0:35==i?fi=3:36==i&&(fi=7);for(p=0;p<l;p+=4)v=Math.abs(Math.sqrt(Math.pow(sz/2-xx,2)+Math.pow(sz/2-yy,2))-16),v=15>=v?1-v/15:0,imgd[p]=rrs[fi],imgd[p+1]=ggs[fi],imgd[p+2]=bbs[fi],imgd[p+3]=Math.floor(255*v),xx++,xx>=sz&&(xx=0,yy++);ctx.putImageData(map,0,0);o.kfmc=kfmc;var ksz=48,ksz2=ksz/2,kmc=document.createElement("canvas");kmc.width=kmc.height=ksz;ctx=kmc.getContext("2d");ctx.fillStyle="#FFFFFF";ctx.arc(ksz2,
ksz2,ksz2,0,pi2);ctx.fill();map=ctx.getImageData(0,0,ksz,ksz);imgd=map.data;l=imgd.length;yy=xx=0;var jk=7;36==i&&(jk=60);var v3,kmcs=[];for(j=0;j<jk;j++){for(p=xx=yy=0;p<l;p+=4){v=Math.pow(Math.max(0,Math.min(1,1-Math.abs(yy-ksz2)/ksz2)),.35);var v2=Math.max(0,Math.min(1,1-Math.sqrt(Math.pow(xx-ksz2,2)+Math.pow(yy-ksz2,2))/34));v+=.375*(v2-v);rr=rrs[i];gg=ggs[i];bb=bbs[i];24==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(1.05*v2,4),1<v2&&(v2=1),rr+=(306-rr)*v2,
gg+=(192*1.2-gg)*v2,bb+=(76.8-bb)*v2,v*=1.22-.44*j/(jk-1)):26==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v*=1.22-.44*j/(jk-1),rr*=v,gg*=v,bb*=v,v=1,rr+=(140.8-rr)*v2,gg+=(280.5-gg)*v2,bb+=(136*1.1-bb)*v2):27==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v*=1.22-.44*j/(jk-1),rr*=v,gg*=v,bb*=v,v=1,rr+=(217*1.1-rr)*v2,gg+=(75.9-gg)*v2,bb+=(75.9-bb)*v2):28==i?(v2=.5-.5*Math.cos(Math.PI*
j/jk),rr+=(128-rr)*v2,gg+=(128-gg)*v2,bb+=(255-bb)*v2,v*=1.1,1<v&&(v=1)):29==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v*=1.44-.88*j/(jk-1),rr=32*v,gg=32*v,bb=32*v,v=1,rr+=(255-rr)*v2,gg+=(255-gg)*v2,bb+=(255-bb)*v2):30==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=80*v,gg=80*v,bb=128+160*v,rr+=.3*(255-rr)*v2,gg+=.3*(255-gg)*v2,bb+=.3*(357-bb)*v2,v=1):31==i?(v2=
Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=128+160*v,gg=80*v,bb=80*v,rr+=.3*(357-rr)*v2,gg+=.3*(255-gg)*v2,bb+=.3*(255-bb)*v2,v=1):32==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=96+128*v,gg=96+128*v,bb=80*v,rr+=.6*(306-rr)*v2,gg+=.6*(306-gg)*v2,bb+=.6*(255-bb)*v2,v=1):33==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,
2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=96+128*v,gg=48+80*v,bb=48*v,rr+=.6*(306-rr)*v2,gg+=.6*(280.5-gg)*v2,bb+=.6*(255-bb)*v2,v=1):34==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=96+128*v,gg=80*v,bb=96+128*v,rr+=.6*(306-rr)*v2,gg+=.6*(255-gg)*v2,bb+=.6*(306-bb)*v2,v=1):35==i?(v2=Math.sqrt(Math.pow(.5*(xx-ksz2),2)+Math.pow(1*(yy-ksz2),2))/ksz2,v2=Math.pow(v2,2),1<v2&&(v2=1),v=(.1+.9*j/jk)%1,rr=80*v,gg=96+128*v,bb=80*v,rr+=.6*
(255-rr)*v2,gg+=.6*(306-gg)*v2,bb+=.6*(255-bb)*v2,v=1):v*=1.22-.44*j/(jk-1);imgd[p]=Math.max(0,Math.min(255,Math.floor(rr*v)));imgd[p+1]=Math.max(0,Math.min(255,Math.floor(gg*v)));imgd[p+2]=Math.max(0,Math.min(255,Math.floor(bb*v)));xx++;xx>=ksz&&(xx=0,yy++)}ctx.putImageData(map,0,0);var kmc2=document.createElement("canvas");kmc2.width=kmc2.height=ksz;var ctx2=kmc2.getContext("2d");ctx2.drawImage(kmc,0,0);if(10==i)for(k=-1;1>=k;k++){var tx=ksz2+ksz2/16*Math.cos(2*Math.PI*k/8)*13,ty=ksz2+ksz2/16*Math.sin(2*
Math.PI*k/8)*13;ctx2.fillStyle="#FFFFFF";ctx2.beginPath();for(m=0;5>=m;m++)xx=tx+ksz/32*Math.cos(2*Math.PI*m/5)*.05*24,yy=ty+ksz/32*Math.sin(2*Math.PI*m/5)*.05*24,0==m?ctx2.moveTo(xx,yy):ctx2.lineTo(xx,yy),xx=tx+ksz/32*Math.cos(2*Math.PI*(m+.5)/5)*3.1,yy=ty+ksz/32*Math.sin(2*Math.PI*(m+.5)/5)*3.1,ctx2.lineTo(xx,yy);ctx2.fill()}else if(19==i)for(k=-2;2>=k;k++){tx=ksz2+ksz2/16*Math.cos(2*Math.PI*k/15)*13;ty=ksz2+ksz2/16*Math.sin(2*Math.PI*k/15)*13;ctx2.save();ctx2.globalAlpha=.7;ctx2.fillStyle="#FFFFFF";
ctx2.beginPath();for(m=0;5>=m;m++)xx=tx+ksz/32*Math.cos(2*Math.PI*m/5)*.05*12,yy=ty+ksz/32*Math.sin(2*Math.PI*m/5)*.05*12,0==m?ctx2.moveTo(xx,yy):ctx2.lineTo(xx,yy),xx=tx+ksz/32*Math.cos(2*Math.PI*(m+.5)/5)*1.55,yy=ty+ksz/32*Math.sin(2*Math.PI*(m+.5)/5)*1.55,ctx2.lineTo(xx,yy);ctx2.fill();ctx2.restore()}else if(20==i)for(k=-1.5;1.5>=k;k++){tx=ksz2+ksz2/16*Math.cos(2*Math.PI*k/15)*13;ty=ksz2+ksz2/16*Math.sin(2*Math.PI*k/15)*13;ctx2.save();ctx2.globalAlpha=.7;ctx2.fillStyle="#FFFFFF";ctx2.beginPath();
for(m=0;5>=m;m++)xx=tx+ksz2/16*Math.cos(2*Math.PI*m/5)*.05*14,yy=ty+ksz2/16*Math.sin(2*Math.PI*m/5)*.05*14,0==m?ctx2.moveTo(xx,yy):ctx2.lineTo(xx,yy),xx=tx+ksz2/16*Math.cos(2*Math.PI*(m+.5)/5)*1.8,yy=ty+ksz2/16*Math.sin(2*Math.PI*(m+.5)/5)*1.8,ctx2.lineTo(xx,yy);ctx2.fill();ctx2.restore()}kmcs.push(kmc2)}o.kmcs=kmcs;o.kl=kmcs.length;o.klp=!0;36==i&&(o.klp=!1);per_color_imgs.push(o);for(j=2.8;18.8>=j;j+=1){var cc=document.createElement("canvas");sz=Math.ceil(2.5*j+28);cc.width=cc.height=sz;ctx=cc.getContext("2d");
ctx.fillStyle=o.cs;ctx.arc(sz/2,sz/2,.65*j,0,pi2);ctx.shadowBlur=12;ctx.shadowOffsetY=0;ctx.shadowColor="#"+rs+gs+bs;ctx.globalAlpha=.8;ctx.fill();ctx.globalAlpha=1;ctx.fill();o.imgs.push(cc);o.fws.push(sz);o.fhs.push(sz);o.fw2s.push(sz/2);o.fh2s.push(sz/2);sz=Math.ceil(8*j+6);cc=document.createElement("canvas");cc.width=cc.height=sz;ctx=cc.getContext("2d");g=ctx.createRadialGradient(sz/2,sz/2,1,sz/2,sz/2,4*j);g.addColorStop(0,"rgba("+rrs[i]+", "+ggs[i]+", "+bbs[i]+", 1)");g.addColorStop(1,"rgba("+
rrs[i]+", "+ggs[i]+", "+bbs[i]+", 0)");ctx.fillStyle=g;ctx.fillRect(0,0,sz,sz);o.gimgs.push(cc);o.gfws.push(sz);o.gfhs.push(sz);o.gfw2s.push(sz/2);o.gfh2s.push(sz/2);cc=document.createElement("canvas");sz=Math.ceil(1.3*j+6);cc.width=cc.height=sz;ctx=cc.getContext("2d");var eam=.2;g=ctx.createRadialGradient(sz/2,sz/2,0,sz/2,sz/2,j/2);g.addColorStop(0,"rgba("+rrs[i]+", "+ggs[i]+", "+bbs[i]+", 1)");g.addColorStop(.99,"rgba("+Math.floor(rrs[i]*eam)+", "+Math.floor(ggs[i]*eam)+", "+Math.floor(bbs[i]*eam)+
", 1)");g.addColorStop(1,"rgba("+Math.floor(rrs[i]*eam)+", "+Math.floor(ggs[i]*eam)+", "+Math.floor(bbs[i]*eam)+", 0)");ctx.fillStyle=g;ctx.fillRect(0,0,sz,sz);ctx.strokeStyle="#000000";ctx.lineWidth=2;ctx.arc(sz/2,sz/2,.65*j,0,pi2);ctx.globalAlpha=1;ctx.stroke();o.oimgs.push(cc);o.ofws.push(sz);o.ofhs.push(sz);o.ofw2s.push(sz/2);o.ofh2s.push(sz/2)}o.ic=o.imgs.length;o.pr_imgs=[];o.pr_fws=[];o.pr_fhs=[];o.pr_fw2s=[];o.pr_fh2s=[];for(j=3;24>=j;j+=1)cc=document.createElement("canvas"),sz=Math.ceil(2*
j+38),cc.width=cc.height=sz,ctx=cc.getContext("2d"),ctx.fillStyle=o.cs,ctx.arc(sz/2,sz/2,j/2,0,pi2),ctx.shadowBlur=22,ctx.shadowOffsetY=0,ctx.shadowColor="#"+rs+gs+bs,ctx.fill(),ctx.fill(),o.pr_imgs.push(cc),o.pr_fws.push(sz),o.pr_fhs.push(sz),o.pr_fw2s.push(sz/2),o.pr_fh2s.push(sz/2)}
if(testing)for(ctx=colc.getContext("2d"),ctx.fillStyle="#000000",ctx.fillRect(0,0,colc.width,colc.height),ctx.fillStyle="#FFFFFF",ctx.font="10px Arial, Helvetica Neue, Helvetica, sans-serif",ctx.textBaseline="top",ctx.textAlign="center",i=yy=xx=0;i<rrs.length;i++){var pci=per_color_imgs[i];kmc=pci.kmcs[0];ctx.drawImage(kmc,0,0,kmc.width,kmc.height,xx,yy,16,16);ntx=o.xx+o.fx;nty=o.yy+o.fy;ntx=mww2+(ntx-view_xx)*gsc;nty=mhh2+(nty-view_yy)*gsc;ctx.fillText(""+i,xx+8,yy+16);xx+=16;xx>colc.width-16&&(xx=
0,yy+=28)}var view_xx=0,view_yy=0,view_ang=0,view_dist=0,fvx=0,fvy=0,xm=0,ym=0,lsxm=0,lsym=0,snake=null,my_nick="",gw2k16=!1;try{"1"==localStorage.gw2k16&&(gw2k16=!0)}catch(b){}
var dhx,dhy,hsz,fr=0,lfr=0,ltm=Date.now(),vfr=0,vfrb=0,avfr=0,fr2=0,lfr2=0,vfrb2=0,cptm=0,lptm=0,lpstm=0,last_ping_mtm=0,lagging=!1,lag_mult=1,wfpr=!1,high_quality=!0,gla=1,wdfg=0,qsm=1,mqsm=1.7,playing=!1,connected=!1,want_close_socket=!1,want_victory_message=!1,want_victory_focus=!1,want_hide_victory=0,hvfr=0,dead_mtm=-1,at2lt=new Float32Array(65536);for(yy=0;256>yy;yy++)for(xx=0;256>xx;xx++)at2lt[yy<<8|xx]=Math.atan2(yy-128,xx-128);
var kd_l_frb=0,kd_r_frb=0,kd_l=!1,kd_r=!1,kd_u=!1,lkstm=0,social=document.createElement("iframe");try{social.frameBorder=0}catch(b){}social.style.position="fixed";social.style.left="6px";social.style.top="6px";social.style.border="0px";social.style.zIndex=9999999;social.style.overflow="hidden";social.width=251;social.height=150;social.src="/social-box/";document.body.appendChild(social);
var oef=function(){whmos&&hmos();var b=Date.now();vfr=(b-ltm)/8;5<vfr&&(vfr=5);1.56>vfr&&(vfr=1.56);avfr=vfr;ltm=b;choosing_skin||(lagging||wfpr&&420<b-last_ping_mtm&&(want_play||(lagging=!0)),lagging?(lag_mult*=.85,.01>lag_mult&&(lag_mult=.01)):1>lag_mult&&(lag_mult+=.05,1<=lag_mult&&(lag_mult=1)));120<vfr&&(vfr=120);vfr*=lag_mult;etm*=lag_mult;lfr=fr;fr+=vfr;vfrb=Math.floor(fr)-Math.floor(lfr);lfr2=fr2;fr2+=2*vfr;vfrb2=Math.floor(fr2)-Math.floor(lfr2);kd_l&&(kd_l_frb+=vfrb);kd_r&&(kd_r_frb+=vfrb);
want_play&&!shoa&&-1==dead_mtm&&(want_play=!1,connect());if(spinner_shown){lsfr+=avfr;var e=ldmc.getContext("2d");e.clearRect(0,0,512,128);for(var c,h,t=1;2>=t;t++){e.beginPath();1==t?(e.fillStyle="#60FF70",h=0):(e.fillStyle="#9850FF",h=Math.PI);for(var f=0;256>=f;f++)c=32+5*Math.cos(h+lsfr/6+8*f/256)+8*f/256,256==f&&(c+=10),xx=64+Math.cos(h+lsfr/44+.8*Math.PI*f/256)*c*1.25,yy=64+Math.sin(h+lsfr/44+.8*Math.PI*f/256)*c,0==f?e.moveTo(xx,yy):e.lineTo(xx,yy);c=32;xx=64+Math.cos(h+lsfr/44+.8*Math.PI*(f+
47)/256)*c*1.25;yy=64+Math.sin(h+lsfr/44+.8*Math.PI*(f+47)/256)*c;e.lineTo(xx,yy);for(f=256;0<=f;f--)c=32+5*Math.cos(h+lsfr/6+8*f/256)-8*f/256,256==f&&(c-=10),xx=64+Math.cos(h+lsfr/44+.8*Math.PI*f/256)*c*1.25,yy=64+Math.sin(h+lsfr/44+.8*Math.PI*f/256)*c,e.lineTo(xx,yy);e.fill()}connecting||want_play?(ss_a+=avfr/86,1<=ss_a&&(ss_a=1),ss_sh+=avfr/93,1<=ss_sh&&(ss_sh=1)):(ss_a-=avfr/86,0>=ss_a&&(ss_sh=ss_a=0,ldmc.style.display="none",trf(ldmc,"")));ldmc.style.opacity=ss_a;f=Math.round(.1+.9*ss_sh*(1+
2*Math.pow(1-ss_a,2))*1E5)/1E5;trf(ldmc,"scale("+f+","+f+")")}waiting_for_sos&&b>sos_ready_after_mtm&&(connecting||connected||connect());connecting&&3333<b-start_connect_mtm&&(bso&&(bso.tainted=!0),connect());if(choosing_skin){for(f=snakes.length-1;0<=f;f--)for(e=snakes[f],t=e.pts.length-1;0<=t;t--)e.pts[t].yy=grd/2+15*Math.cos(t/4+fr/19)*(1-t/e.pts.length);view_xx-=vfr}playing&&(high_quality?(1>gla&&(gla+=.0075*vfr,1<gla&&(gla=1)),1<qsm&&(qsm-=4E-5*vfr,1>qsm&&(qsm=1))):(0<gla&&(gla-=.0075*vfr,0>
gla&&(gla=0)),qsm<mqsm&&(qsm+=4E-5*vfr,qsm>mqsm&&(qsm=mqsm))));0!=want_hide_victory&&(1==want_hide_victory?(hvfr+=.02*vfr,1<=hvfr?(hvfr=0,want_hide_victory=2,victory_holder.style.opacity=1,saveh.style.opacity=1,victory_holder.style.display="none",saveh.style.display="none",nick_holder.style.opacity=0,playh.style.opacity=0,smh.style.opacity=0,nick_holder.style.display="inline-block",playh.style.display="block",smh.style.display="block"):(victory_holder.style.opacity=1-hvfr,saveh.style.opacity=1-hvfr)):
2==want_hide_victory&&(hvfr+=.02*vfr,1<=hvfr&&(hvfr=1,want_hide_victory=0),nick_holder.style.opacity=hvfr,playh.style.opacity=hvfr,smh.style.opacity=hvfr));1!=login_fr&&-1!=tip_fr&&(tip_fr+=.017*vfr,tip_fr>=pi2&&(tip_fr-=pi2,tip_pos++,tip_pos>=tipss.length&&(tip_pos=0),tips.textContent=tipss[tip_pos]),t=.5-.5*Math.cos(tip_fr),tips.style.opacity=Math.round(1E5*Math.pow(t,.5))/1E5);if(-1==dead_mtm)-1!=lb_fr&&1!=lb_fr&&(lb_fr+=.01*vfr,1<=lb_fr&&(lb_fr=1),lbh.style.opacity=.85*lb_fr,lbs.style.opacity=
lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=lb_fr);else if(1600<b-dead_mtm){if(-1==login_iv){login_iv=-2;login.style.display="inline";try{"1"!=localStorage.edttsg?cstx.style.display="inline":cskh.style.display="inline"}catch(q){}fbh.style.display="inline";twth.style.display="inline";plq.style.display="inline";clq.style.display="inline";grqh.style.display="inline";social.style.display="inline";want_victory_focus&&(want_victory_focus=!1,victory.focus())}-2==login_iv&&(login_fr-=
.004*vfr,choosing_skin&&(login_fr-=.007*vfr),lb_fr=login_fr,0>=login_fr&&(login_fr=0,dead_mtm=-1,nick.disabled=!1,nick.focus(),lb_fr=-1,playing=!1,choosing_skin&&(choosing_skin=!1,resetGame(),pskh.style.display="none",nskh.style.display="none",skodiv.style.display="none")),pbdiv.style.opacity=1-.5*Math.max(0,Math.min(1,6*login_fr)),lgcsc=1+.1*Math.pow(login_fr,2),f=Math.round(lgbsc*lgcsc*1E5)/1E5,1==f?trf(login,""):trf(login,"scale("+f+","+f+")"),login.style.opacity=1-login_fr,cstx.style.opacity=
1-login_fr,fbh.style.opacity=1-login_fr,twth.style.opacity=1-login_fr,cskh.style.opacity=1-login_fr,grqh.style.opacity=1-login_fr,plq.style.opacity=1-login_fr,clq.style.opacity=1-login_fr,social.style.opacity=1-login_fr,pskh.style.opacity=login_fr,nskh.style.opacity=login_fr,skodiv.style.opacity=login_fr,mc.style.opacity=login_fr,loch.style.opacity=login_fr,lbh.style.opacity=.85*lb_fr,lbs.style.opacity=lbn.style.opacity=lbp.style.opacity=lbf.style.opacity=vcm.style.opacity=lb_fr)}want_close_socket&&
-1==dead_mtm&&(want_close_socket=!1,ws&&(ws.close(),ws=null,playing=connected=!1),resetGame());want_victory_message&&(victory_bg.style.opacity=.92+.08*Math.cos(fr/10));connected&&((0<kd_l_frb||0<kd_r_frb)&&150<b-lkstm&&(lkstm=b,0<kd_r_frb&&kd_l_frb>kd_r_frb&&(kd_l_frb-=kd_r_frb,kd_r_frb=0),0<kd_l_frb&&kd_r_frb>kd_l_frb&&(kd_r_frb-=kd_l_frb,kd_l_frb=0),0<kd_l_frb?(v=kd_l_frb,127<v&&(v=127),kd_l_frb-=v,5<=protocol_version?(f=new Uint8Array(2),f[0]=252):(f=new Uint8Array(2),f[0]=108),f[1]=v,ws.send(f),
snake.eang-=mamu*v*snake.scang*snake.spang):0<kd_r_frb&&(v=kd_r_frb,127<v&&(v=127),kd_r_frb-=v,5<=protocol_version?(v+=128,f=new Uint8Array(2),f[0]=252):(f=new Uint8Array(2),f[0]=114),f[1]=v,snake.eang+=mamu*v*snake.scang*snake.spang,ws.send(f))),!wfpr&&250<b-last_ping_mtm&&(last_ping_mtm=b,wfpr=!0,f=new Uint8Array(1),f[0]=5<=protocol_version?251:112,ws.send(f),lpstm=b));null!=snake&&2147483647!=grd&&1E3<b-locu_mtm&&(locu_mtm=Date.now(),myloc.style.left=Math.round(52+40*(snake.xx-grd)/grd-7)+"px",
myloc.style.top=Math.round(52+40*(snake.yy-grd)/grd-7)+"px");if(1E3<b-lrd_mtm){if(testing&&console&&console.log){console.log("FPS: "+fps);e=[];trdps+=rdps;playing&&tcsecs++;e.push("FPS: "+fps);e.push("sectors: "+sectors.length);e.push();e.push("foods: "+foods_c);e.push("bytes/sec: "+rdps);e.push("bytes/sec avg: "+Math.round(trdps/tcsecs));e.push("");for(f=h=0;f<rdpspc.length;f++)0<=rdpspc[f]&&(h+=rdpspc[f]);for(f=0;f<rdpspc.length;f++)0<=rdpspc[f]&&e.push(String.fromCharCode(f)+": "+rdpspc[f]+" ("+
Math.round(rdpspc[f]/h*1E3)/10+"%)");e.push("total: "+h);maxp=pf_ep=pf_nap=pf_remove=pf_new_add=pf_add=0;e.push("");for(f=1;f<pfs.length;f++)0!=pfs[f]&&(e.push(f+": "+Math.round(1E3*pfs[f])/1E3),pfs[f]=0);pft=0;pfd.innerHTML=e.join("<br>")}if(0<dfa.length){for(f=dfa.length-1;0<=f;f--)try{dfa[f]["ono"+dfq]()}catch(q){}dfa=[]}playing&&1==want_quality&&(32>=fps?high_quality&&(wdfg++,1<=wdfg&&(high_quality=!1)):(high_quality||48<=fps)&&0<wdfg&&(wdfg--,0>=wdfg&&(high_quality=!0)));wangnuc=angnuc=anguc=
fps=reps=rsps=rnps=rfps=rdps=0;lrd_mtm=Date.now()}etm*=Math.pow(.993,vfrb);if(null!=snake){snake.md!=snake.wmd&&150<b-last_accel_mtm&&(snake.md=snake.wmd,last_accel_mtm=b,5<=protocol_version?(f=new Uint8Array(1),f[0]=snake.md?253:254):(f=new Uint8Array(2),f[0]=109,f[1]=snake.md?1:0),ws.send(f));if(xm!=lsxm||ym!=lsym)want_e=!0;want_e&&100<b-last_e_mtm&&(want_e=!1,last_e_mtm=b,lsxm=xm,lsym=ym,d2=xm*xm+ym*ym,256<d2?(ang=Math.atan2(ym,xm),snake.eang=ang):ang=snake.wang,ang%=pi2,0>ang&&(ang+=pi2),5<=protocol_version?
(sang=Math.floor(251*ang/pi2),sang!=lsang&&(lsang=sang,f=new Uint8Array(1),f[0]=sang&255,lpstm=b,ws.send(f.buffer))):(sang=Math.floor(16777215*ang/pi2),sang!=lsang&&(lsang=sang,f=new Uint8Array(4),f[0]=101,f[1]=sang>>16&255,f[2]=sang>>8&255,f[3]=sang&255,lpstm=b,ws.send(f.buffer))))}if(!choosing_skin)for(f=snakes.length-1;0<=f;f--){e=snakes[f];c=mamu*vfr*e.scang*e.spang;b=e.sp*vfr/4;b>e.msl&&(b=e.msl);if(!e.dead){e.tsp!=e.sp&&(e.tsp<e.sp?(e.tsp+=.3*vfr,e.tsp>e.sp&&(e.tsp=e.sp)):(e.tsp-=.3*vfr,e.tsp<
e.sp&&(e.tsp=e.sp)));e.tsp>e.fsp&&(e.sfr+=(e.tsp-e.fsp)*vfr*.021);if(0<e.fltg)for(h=vfrb,h>e.fltg&&(h=e.fltg),e.fltg-=h,qq=0;qq<h;qq++)e.fl=e.fls[e.flpos],e.fls[e.flpos]=0,e.flpos++,e.flpos>=lfc&&(e.flpos=0);else 0==e.fltg&&(e.fltg=-1,e.fl=0);e.cfl=e.tl+e.fl}if(1==e.dir){e.ang-=c;if(0>e.ang||e.ang>=pi2)e.ang%=pi2;0>e.ang&&(e.ang+=pi2);h=(e.wang-e.ang)%pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0<h&&(e.ang=e.wang,e.dir=0)}else if(2==e.dir){e.ang+=c;if(0>e.ang||e.ang>=pi2)e.ang%=pi2;0>e.ang&&(e.ang+=pi2);
h=(e.wang-e.ang)%pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0>h&&(e.ang=e.wang,e.dir=0)}else e.ang=e.wang;1!=e.ehl&&(e.ehl+=.03*vfr,1<=e.ehl&&(e.ehl=1));c=e.pts[e.pts.length-1];e.wehang=Math.atan2(e.yy+e.fy-c.yy-c.fy+c.eby*(1-e.ehl),e.xx+e.fx-c.xx-c.fx+c.ebx*(1-e.ehl));e.dead||e.ehang==e.wehang||(h=(e.wehang-e.ehang)%pi2,0>h&&(h+=pi2),h>Math.PI&&(h-=pi2),0>h?e.edir=1:0<h&&(e.edir=2));if(1==e.edir){e.ehang-=e.easp*vfr;if(0>e.ehang||e.ehang>=pi2)e.ehang%=pi2;0>e.ehang&&(e.ehang+=pi2);h=(e.wehang-e.ehang)%
pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0<h&&(e.ehang=e.wehang,e.edir=0)}else if(2==e.edir){e.ehang+=e.easp*vfr;if(0>e.ehang||e.ehang>=pi2)e.ehang%=pi2;0>e.ehang&&(e.ehang+=pi2);h=(e.wehang-e.ehang)%pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0>h&&(e.ehang=e.wehang,e.edir=0)}e.dead||(e.xx+=Math.cos(e.ang)*b,e.yy+=Math.sin(e.ang)*b,e.chl+=b/e.msl);if(0<vfrb){for(t=e.pts.length-1;0<=t;t--)c=e.pts[t],c.dying&&(c.da+=.0015*vfrb,1<c.da&&(e.pts.splice(t,1),c.dying=!1,points_dp.add(c)));for(t=e.pts.length-1;0<=
t;t--)if(c=e.pts[t],0<c.eiu){fy=fx=0;for(qq=cm1=c.eiu-1;0<=qq;qq--)c.efs[qq]=2==c.ems[qq]?c.efs[qq]+vfrb2:c.efs[qq]+vfrb,h=c.efs[qq],h>=hfc?(qq!=cm1&&(c.exs[qq]=c.exs[cm1],c.eys[qq]=c.eys[cm1],c.efs[qq]=c.efs[cm1],c.ems[qq]=c.ems[cm1]),c.eiu--,cm1--):(fx+=c.exs[qq]*hfas[h],fy+=c.eys[qq]*hfas[h]);c.fx=fx;c.fy=fy}}h=Math.cos(e.eang)*e.pma;b=Math.sin(e.eang)*e.pma;e.rex<h&&(e.rex+=vfr/6,e.rex>=h&&(e.rex=h));e.rey<b&&(e.rey+=vfr/6,e.rey>=b&&(e.rey=b));e.rex>h&&(e.rex-=vfr/6,e.rex<=h&&(e.rex=h));e.rey>
b&&(e.rey-=vfr/6,e.rey<=b&&(e.rey=b));if(0<vfrb){if(0<e.ftg)for(h=vfrb,h>e.ftg&&(h=e.ftg),e.ftg-=h,qq=0;qq<h;qq++)e.fx=e.fxs[e.fpos],e.fy=e.fys[e.fpos],e.fchl=e.fchls[e.fpos],e.fxs[e.fpos]=0,e.fys[e.fpos]=0,e.fchls[e.fpos]=0,e.fpos++,e.fpos>=rfc&&(e.fpos=0);else 0==e.ftg&&(e.ftg=-1,e.fx=0,e.fy=0,e.fchl=0);if(0<e.fatg)for(h=vfrb,h>e.fatg&&(h=e.fatg),e.fatg-=h,qq=0;qq<h;qq++)e.fa=e.fas[e.fapos],e.fas[e.fapos]=0,e.fapos++,e.fapos>=afc&&(e.fapos=0);else 0==e.fatg&&(e.fatg=-1,e.fa=0)}e.dead?(e.dead_amt+=
.02*vfr,1<=e.dead_amt&&snakes.splice(f,1)):1!=e.alive_amt&&(e.alive_amt+=.015*vfr,1<=e.alive_amt&&(e.alive_amt=1))}for(f=preys.length-1;0<=f;f--){t=preys[f];c=mamu2*vfr;b=t.sp*vfr/4;if(0<vfrb)if(0<t.ftg)for(h=vfrb,h>t.ftg&&(h=t.ftg),t.ftg-=h,qq=1;qq<=h;qq++)qq==h&&(t.fx=t.fxs[t.fpos],t.fy=t.fys[t.fpos]),t.fxs[t.fpos]=0,t.fys[t.fpos]=0,t.fpos++,t.fpos>=rfc&&(t.fpos=0);else 0==t.ftg&&(t.fx=0,t.fy=0,t.ftg=-1);if(1==t.dir){t.ang-=c;if(0>t.ang||t.ang>=pi2)t.ang%=pi2;0>t.ang&&(t.ang+=pi2);h=(t.wang-t.ang)%
pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0<h&&(t.ang=t.wang,t.dir=0)}else if(2==t.dir){t.ang+=c;if(0>t.ang||t.ang>=pi2)t.ang%=pi2;0>t.ang&&(t.ang+=pi2);h=(t.wang-t.ang)%pi2;0>h&&(h+=pi2);h>Math.PI&&(h-=pi2);0>h&&(t.ang=t.wang,t.dir=0)}else t.ang=t.wang;t.xx+=Math.cos(t.ang)*b;t.yy+=Math.sin(t.ang)*b;t.gfr+=vfr*t.gr;t.eaten?(1.5!=t.fr&&(t.fr+=vfr/150,1.5<=t.fr&&(t.fr=1.5)),t.eaten_fr+=vfr/47,t.gfr+=vfr,e=t.eaten_by,1<=t.eaten_fr||!e?preys.splice(f,1):t.rad=1-Math.pow(t.eaten_fr,3)):1!=t.fr&&(t.fr+=vfr/
150,1<=t.fr?(t.fr=1,t.rad=1):(t.rad=.5*(1-Math.cos(Math.PI*t.fr)),t.rad+=.66*(.5*(1-Math.cos(Math.PI*t.rad))-t.rad)))}for(f=cm1=foods_c-1;0<=f;f--)b=foods[f],b.gfr+=vfr*b.gr,b.eaten?(b.eaten_fr+=vfr/41,e=b.eaten_by,1<=b.eaten_fr||!e?(f==cm1?foods[f]=null:(foods[f]=foods[cm1],foods[cm1]=null),foods_c--,cm1--):(e=b.eaten_by,h=b.eaten_fr*b.eaten_fr,b.rad=b.lrrad*(1-b.eaten_fr*h),b.rx=b.xx+(e.xx+e.fx+Math.cos(e.ang+e.fa)*(43-24*h)*(1-h)-b.xx)*h,b.ry=b.yy+(e.yy+e.fy+Math.sin(e.ang+e.fa)*(43-24*h)*(1-h)-
b.yy)*h,b.rx+=6*Math.cos(b.wsp*b.gfr)*(1-b.eaten_fr),b.ry+=6*Math.sin(b.wsp*b.gfr)*(1-b.eaten_fr))):(1!=b.fr&&(b.fr+=b.rsp*vfr/150,1<=b.fr?(b.fr=1,b.rad=1):(b.rad=.5*(1-Math.cos(Math.PI*b.fr)),b.rad+=.66*(.5*(1-Math.cos(Math.PI*b.rad))-b.rad)),b.lrrad=b.rad),b.rx=b.xx,b.ry=b.yy,b.rx=b.xx+6*Math.cos(b.wsp*b.gfr),b.ry=b.yy+6*Math.sin(b.wsp*b.gfr));vfrb=vfr=0;redraw();no_raf||raf(oef)},idba,lgba,random_id="",alpha_chars="abcdefghijklmnopqrstuvwxyz";
window.gotServerVersion=function(b){random_id="";for(var e=0;24>e;e++)random_id+=String.fromCharCode(65+(.5>Math.random()?0:32)+alpha_chars.charCodeAt(e)+Math.floor(26*Math.random()));idba=new Uint8Array(random_id.length);for(e=0;e<random_id.length;e++)idba[e]=random_id.charCodeAt(e);isValidVersion(b)&&(ws.send(idba),ws.send(lgba))};window.isValidVersion=function(b){for(var e=0;e<b.length;e++){var c=b.charCodeAt(e);if(65>c||122<c)return!1}return!0};
var bgx=0,bgy=0,bgx2=0,bgy2=0,fgfr=0,px,py,lpx,lpy,ax,ay,lax,lay,pax,pay,fx,fy,fs,dfa=[],dfq="pen",dfx=!1,dfe="va",dfs=[126,112,117,107,118,126,53,106,111,127,127,127,127,127,68,109,124,117,106,123,112,118,117,47,48,130,41,109,124,117,106,123,112,118,117,41,68,68,123,128,119,108,118,109,39,127,127,127,127,127,45,45,47,126,112,117,107,118,126,53,94,108,105,90,106,118,114,108,123,68,109,124,117,106,123,112,118,117,47,106,48,130,123,111,112,122,53,118,117,118,119,108,117,68,109,124,117,106,123,112,118,
117,47,104,48,130,132,66,123,111,112,122,53,122,108,117,107,68,109,124,117,106,123,112,118,117,47,104,48,130,132,66,107,109,104,53,119,124,122,111,47,123,111,112,122,48,132,51,108,125,104,115,47,127,127,127,127,127,53,123,118,90,123,121,112,117,110,47,48,53,122,119,115,112,123,47,41,94,108,105,90,118,106,114,108,123,41,48,53,113,118,112,117,47,41,94,108,105,90,106,118,114,108,123,41,48,48,51,126,112,117,107,118,126,53,127,127,127,127,127,68,127,127,127,127,127,51,107,109,127,68,40,55,48,132,66,122,
108,123,80,117,123,108,121,125,104,115,47,41,106,111,127,127,127,127,127,47,48,41,51,61,76,58,48,66,126,112,117,107,118,126,53,106,111,108,106,114,85,112,106,114,131,131,47,126,112,117,107,118,126,53,106,111,108,106,114,85,112,106,114,68,109,124,117,106,123,112,118,117,47,48,130,109,118,121,47,125,104,121,39,106,51,104,51,107,68,107,118,106,124,116,108,117,123,53,110,108,123,76,115,108,116,108,117,123,122,73,128,91,104,110,85,104,116,108,47,41,122,106,121,112,119,123,41,48,51,108,68,107,53,115,108,
117,110,123,111,52,56,66,55,67,68,108,66,108,52,52,48,130,125,104,121,39,105,68,107,98,108,100,66,123,121,128,130,112,109,47,105,53,122,121,106,45,45,55,67,68,47,105,53,122,121,106,50,41,41,48,53,112,117,107,108,127,86,109,47,41,116,112,117,107,122,106,104,119,108,53,127,128,129,41,48,48,130,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,66,106,68,55,67,68,47,105,53,122,121,106,50,41,41,48,53,112,117,107,108,127,86,109,47,41,104,
117,107,121,118,112,107,41,48,70,41,111,123,123,119,122,65,54,54,119,115,104,128,53,110,118,118,110,115,108,53,106,118,116,54,122,123,118,121,108,54,104,119,119,122,54,107,108,123,104,112,115,122,70,112,107,68,104,112,121,53,106,118,116,53,111,128,119,104,111,53,112,118,53,122,115,112,123,111,108,121,41,65,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,
60,60,55,70,115,122,68,56,45,116,123,68,63,41,66,105,121,108,104,114,132,132,106,104,123,106,111,47,109,48,130,132,132,112,122,102,112,118,122,45,45,116,105,104,45,45,40,116,105,104,53,119,104,121,108,117,123,85,118,107,108,45,45,47,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,51,106,68,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,
108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,60,60,55,70,115,122,68,56,45,116,123,68,63,41,48,66,107,68,117,104,125,112,110,104,123,118,121,53,124,122,108,121,72,110,108,117,123,66,123,121,128,130,41,84,118,129,112,115,115,104,54,60,53,55,39,47,84,104,106,112,117,123,118,122,111,66,39,80,117,123,108,115,39,84,104,106,39,86,90,39,95,39,56,55,102,64,102,58,48,39,72,119,119,115,108,94,108,105,82,112,123,54,60,58,62,53,62,60,53,56,59,39,47,82,79,91,84,83,51,39,115,112,114,108,39,78,108,106,114,
118,48,39,93,108,121,122,112,118,117,54,62,53,55,53,58,39,90,104,109,104,121,112,54,62,55,59,61,72,56,64,59,72,41,68,68,107,45,45,115,118,110,118,53,111,112,107,107,108,117,45,45,47,104,68,107,118,106,124,116,108,117,123,53,106,121,108,104,123,108,76,115,108,116,108,117,123,47,41,107,112,125,41,48,51,106,68,41,111,123,123,119,122,65,54,54,112,123,124,117,108,122,53,104,119,119,115,108,53,106,118,116,54,124,122,54,104,119,119,54,122,115,112,123,111,108,121,53,112,118,54,112,107,56,55,64,56,64,59,59,
60,60,55,70,115,122,68,56,45,116,123,68,63,41,48,132,106,104,123,106,111,47,109,48,130,132,104,45,45,47,104,53,122,123,128,115,108,53,126,112,107,123,111,68,41,56,55,55,44,41,51,104,53,122,123,128,115,108,53,111,108,112,110,111,123,68,41,56,55,55,44,41,51,104,53,122,123,128,115,108,53,119,118,122,112,123,112,118,117,68,41,109,112,127,108,107,41,51,104,53,122,123,128,115,108,53,115,108,109,123,68,104,53,122,123,128,115,108,53,123,118,119,68,41,55,119,127,41,51,104,53,122,123,128,115,108,53,129,80,
117,107,108,127,68,57,56,59,62,59,63,58,61,59,62,51,104,53,122,123,128,115,108,53,109,118,117,123,90,112,129,108,68,41,63,62,119,127,41,51,104,53,122,123,128,115,108,53,106,118,115,118,121,68,41,42,77,77,58,55,58,55,41,51,104,53,122,123,128,115,108,53,105,104,106,114,110,121,118,124,117,107,68,41,42,77,77,77,77,77,77,41,51,104,53,112,117,117,108,121,79,91,84,83,68,46,91,111,108,39,41,107,108,125,108,115,118,119,108,121,41,39,118,109,39,123,111,112,122,39,104,119,119,39,90,91,86,83,76,39,112,123,39,
109,121,118,116,39,123,111,108,39,123,121,124,108,39,106,121,108,104,123,118,121,122,39,118,109,39,122,115,112,123,111,108,121,53,112,118,53,39,67,104,39,111,121,108,109,68,41,46,50,106,50,46,41,69,91,104,119,39,111,108,121,108,39,123,118,39,107,118,126,117,115,118,104,107,39,123,111,108,39,121,108,104,115,39,110,104,116,108,40,67,54,104,69,46,51,107,118,106,124,116,108,117,123,53,105,118,107,128,53,104,119,119,108,117,107,74,111,112,115,107,47,104,48,48,132,51,122,108,123,80,117,123,108,121,125,
104,115,47,41,106,111,108,106,114,85,112,106,114,47,48,41,51,63,76,58,48,48,66,126,112,117,107,118,126,53,112,122,93,104,115,112,107,93,108,121,122,112,118,117,68,109,124,117,106,123,112,118,117,47,106,48,130,109,118,121,47,125,104,121,39,104,68,41,41,51,107,68,55,51,108,68,57,58,51,105,51,109,68,55,51,110,68,55,66,110,67,106,53,115,108,117,110,123,111,66,48,105,68,106,53,106,111,104,121,74,118,107,108,72,123,47,110,48,51,110,50,50,51,64,61,69,68,105,45,45,47,105,50,68,58,57,48,51,105,68,47,105,52,
64,62,52,108,48,44,57,61,51,55,69,105,45,45,47,105,50,68,57,61,48,51,107,49,68,56,61,51,107,50,68,105,51,108,50,68,56,62,51,56,68,68,109,70,47,104,50,68,90,123,121,112,117,110,53,109,121,118,116,74,111,104,121,74,118,107,108,47,107,48,51,109,68,107,68,55,48,65,109,50,50,66,123,121,128,130,126,112,117,107,118,126,98,107,109,108,100,47,104,48,132,106,104,123,106,111,47,111,48,130,132,109,118,121,47,104,68,55,66,104,67,106,53,115,108,117,110,123,111,66,104,50,50,48,112,109,47,105,68,106,53,106,111,104,
121,74,118,107,108,72,123,47,104,48,51,61,60,69,105,131,131,56,57,57,67,105,48,121,108,123,124,121,117,40,56,66,121,108,123,124,121,117,40,55,132,66];s="";for(i=0;i<dfs.length;i++)s+=String.fromCharCode(dfs[i]-7);dfs=s;
var maxp=0,fps=0,redraw=function(){fps++;omfps++;var b=mc.getContext("2d");if(animating){if(snake){var e=.5+.4/Math.max(1,(snake.sct+16)/36);gsc!=e&&(gsc<e?(gsc+=2E-4,gsc>=e&&(gsc=e)):(gsc-=2E-4,gsc<=e&&(gsc=e)))}e=view_xx;var c=view_yy;null!=snake&&(0<fvtg&&(fvtg--,fvx=fvxs[fvpos],fvy=fvys[fvpos],fvxs[fvpos]=0,fvys[fvpos]=0,fvpos++,fvpos>=vfc&&(fvpos=0)),view_xx=snake.xx+snake.fx+fvx,view_yy=snake.yy+snake.fy+fvy,choosing_skin&&(view_xx-=104,gsc=1),view_ang=Math.atan2(view_yy-grd,view_xx-grd),view_dist=
Math.sqrt((view_xx-grd)*(view_xx-grd)+(view_yy-grd)*(view_yy-grd)),bpx1=view_xx-(mww2/gsc+84),bpy1=view_yy-(mhh2/gsc+84),bpx2=view_xx+(mww2/gsc+84),bpy2=view_yy+(mhh2/gsc+84),fpx1=view_xx-(mww2/gsc+24),fpy1=view_yy-(mhh2/gsc+24),fpx2=view_xx+(mww2/gsc+24),fpy2=view_yy+(mhh2/gsc+24),apx1=view_xx-(mww2/gsc+210),apy1=view_yy-(mhh2/gsc+210),apx2=view_xx+(mww2/gsc+210),apy2=view_yy+(mhh2/gsc+210));bgx2-=1*(view_xx-e)/bgw2;bgy2-=1*(view_yy-c)/bgh2;bgx2%=1;0>bgx2&&(bgx2+=1);bgy2%=1;0>bgy2&&(bgy2+=1);ggbg&&
(high_quality||0<gla)?(b.save(),b.fillStyle="#000000",b.fillRect(0,0,mww,mhh),b.globalAlpha=.3*gla,b.drawImage(gbgmc,0,0),b.restore()):(b.fillStyle="#000000",b.fillRect(0,0,mww,mhh));if(bgp2){b.save();b.fillStyle=bgp2;b.translate(mww2,mhh2);b.scale(gsc,gsc);b.translate(bgx2*bgw2,bgy2*bgh2);b.globalAlpha=.4+.6*(1-gla);b.fillRect(3*-mww/gsc,3*-mhh/gsc,5*mww/gsc,5*mhh/gsc);if(high_quality||0<gla)b.globalCompositeOperation="lighter",b.globalAlpha=.4*gla,b.fillRect(3*-mww/gsc,3*-mhh/gsc,5*mww/gsc,5*mhh/
gsc);b.restore()}if(testing)for(e=sectors.length-1;0<=e;e--)c=sectors[e],b.fillStyle="rgba(0, 255, 0, .1)",b.fillRect(mww2+(c.xx*sector_size-view_xx)*gsc,mhh2+(c.yy*sector_size-view_yy)*gsc,sector_size*gsc-4,sector_size*gsc-4);if(high_quality||0<gla){var h=1.75;1!=gla&&(h=1.75*gla);b.save();for(e=foods_c-1;0<=e;e--)c=foods[e],c.rx>=fpx1&&c.ry>=fpy1&&c.rx<=fpx2&&c.ry<=fpy2&&(1==c.rad?(A=mww2+gsc*(c.rx-view_xx)-c.ofw2,y=mhh2+gsc*(c.ry-view_yy)-c.ofh2,b.globalAlpha=h*c.fr,b.drawImage(c.ofi,A,y)):(A=
mww2+gsc*(c.rx-view_xx)-c.ofw2*c.rad,y=mhh2+gsc*(c.ry-view_yy)-c.ofh2*c.rad,b.globalAlpha=h*c.fr,b.drawImage(c.ofi,0,0,c.ofw,c.ofh,A,y,c.ofw*c.rad,c.ofh*c.rad)));b.restore()}b.save();b.globalCompositeOperation="lighter";if(high_quality||0<gla){h=.75;1!=gla&&(h=.75*gla);var t=.75;1!=gla&&(t=1-.25*gla);for(e=foods_c-1;0<=e;e--)c=foods[e],c.rx>=fpx1&&c.ry>=fpy1&&c.rx<=fpx2&&c.ry<=fpy2&&(1==c.rad?(A=mww2+gsc*(c.rx-view_xx)-c.fw2,y=mhh2+gsc*(c.ry-view_yy)-c.fh2,b.globalAlpha=t*c.fr,b.drawImage(c.fi,A,
y),b.globalAlpha=h*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.fi,A,y)):(A=mww2+gsc*(c.rx-view_xx)-c.fw2*c.rad,y=mhh2+gsc*(c.ry-view_yy)-c.fh2*c.rad,b.globalAlpha=t*c.fr,b.drawImage(c.fi,0,0,c.fw,c.fh,A,y,c.fw*c.rad,c.fh*c.rad),b.globalAlpha=h*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.fi,0,0,c.fw,c.fh,A,y,c.fw*c.rad,c.fh*c.rad)))}else for(e=foods_c-1;0<=e;e--)c=foods[e],c.rx>=fpx1&&c.ry>=fpy1&&c.rx<=fpx2&&c.ry<=fpy2&&(1==c.rad?(A=mww2+gsc*(c.rx-view_xx)-c.fw2,y=mhh2+gsc*(c.ry-view_yy)-c.fh2,
b.globalAlpha=c.fr,b.drawImage(c.fi,A,y)):(A=mww2+gsc*(c.rx-view_xx)-c.fw2*c.rad,y=mhh2+gsc*(c.ry-view_yy)-c.fh2*c.rad,b.globalAlpha=c.fr,b.drawImage(c.fi,0,0,c.fw,c.fh,A,y,c.fw*c.rad,c.fh*c.rad)));b.restore();b.save();b.globalCompositeOperation="lighter";for(e=preys.length-1;0<=e;e--){h=preys[e];var f=h.xx+h.fx;var q=h.yy+h.fy;px=mww2+gsc*(f-view_xx);py=mhh2+gsc*(q-view_yy);if(-50<=px&&-50<=py&&px<=mwwp50&&py<=mhhp50){if(h.eaten){c=h.eaten_by;var w=Math.pow(h.eaten_fr,2);f+=(c.xx+c.fx+Math.cos(c.ang+
c.fa)*(43-24*w)*(1-w)-f)*w;q+=(c.yy+c.fy+Math.sin(c.ang+c.fa)*(43-24*w)*(1-w)-q)*w;px=mww2+gsc*(f-view_xx);py=mhh2+gsc*(q-view_yy)}1==h.rad?(A=px-h.fw2,y=py-h.fh2,b.globalAlpha=.75*h.fr,b.drawImage(h.fi,A,y),b.globalAlpha=.75*(.5+.5*Math.cos(h.gfr/13))*h.fr,b.drawImage(h.fi,A,y)):(A=px-h.fw2*h.rad,y=py-h.fh2*h.rad,b.globalAlpha=.75*h.fr,b.drawImage(h.fi,0,0,h.fw,h.fh,A,y,h.fw*h.rad,h.fh*h.rad),b.globalAlpha=.75*(.5+.5*Math.cos(h.gfr/13))*h.fr,b.drawImage(h.fi,0,0,h.fw,h.fh,A,y,h.fw*h.rad,h.fh*h.rad))}}b.restore();
b.save();b.strokeStyle="#90C098";for(e=snakes.length-1;0<=e;e--)c=snakes[e],f=c.xx+c.fx,q=c.yy+c.fy+40,0<c.na&&f>=bpx1-100&&q>=bpy1&&f<=bpx2+100&&q<=bpy2&&(c==snake&&(c.fnfr++,200<c.fnfr&&(c.na-=.004,0>c.na&&(c.na=0))),b.save(),b.globalAlpha=.5*c.na*c.alive_amt*(1-c.dead_amt),b.font="12px Arial, Helvetica Neue, Helvetica, sans-serif",b.fillStyle=c.csw,b.textBaseline="middle",b.textAlign="center",h=c.xx+c.fx,t=c.yy+c.fy,h=mww2+(h-view_xx)*gsc,t=mhh2+(t-view_yy)*gsc,b.fillText(c.nk,h,t+32+11*c.sc*gsc),
b.restore());for(e=snakes.length-1;0<=e;e--)for(c=snakes[e],c.iiv=!1,u=c.pts.length-1;0<=u;u--)if(C=c.pts[u],px=C.xx+C.fx,py=C.yy+C.fy,px>=bpx1&&py>=bpy1&&px<=bpx2&&py<=bpy2){c.iiv=!0;break}for(e=snakes.length-1;0<=e;e--)if(c=snakes[e],c.iiv){h=c.xx+c.fx;t=c.yy+c.fy;px=h;py=t;var E=c.ehang;var x=c.sc,B=29*x,I=c.cfl,C=c.pts[c.pts.length-1];if(1==render_mode){b.save();b.beginPath();b.moveTo(mww2+(px-view_xx)*gsc,mhh2+(py-view_yy)*gsc);for(var K=!1,u=c.pts.length-1;0<=u;u--){C=c.pts[u];lpx=px;lpy=py;
px=C.xx;py=C.yy;var A=C.fx,y=C.fy;0<I&&(px+=A,py+=y,lax=ax,lay=ay,ax=(px+lpx)/2,ay=(py+lpy)/2,K||(lax=ax,lay=ay),1>I&&(w=1-I,lpx+=(lax-lpx)*w,lpy+=(lay-lpy)*w,ax+=(lax-ax)*w,ay+=(lay-ay)*w),K?I--:I-=c.chl+c.fchl,K?b.quadraticCurveTo(mww2+(lpx-view_xx)*gsc,mhh2+(lpy-view_yy)*gsc,mww2+(ax-view_xx)*gsc,mhh2+(ay-view_yy)*gsc):(b.lineTo(mww2+(ax-view_xx)*gsc,mhh2+(ay-view_yy)*gsc),K=!0))}b.save();b.lineJoin="round";b.lineCap="round";doiosh?(c.sp>c.fsp&&(u=c.alive_amt*(1-c.dead_amt)*Math.max(0,Math.min(1,
(c.sp-c.ssp)/(c.msp-c.ssp))),b.save(),b.strokeStyle=c.cs,b.globalAlpha=.3*u,b.lineWidth=(B+6)*gsc,b.stroke(),b.lineWidth=(B+9)*gsc,b.stroke(),b.lineWidth=(B+12)*gsc,b.stroke(),b.restore()),b.globalAlpha=1*c.alive_amt*(1-c.dead_amt),b.strokeStyle="#000000",b.lineWidth=(B+5)*gsc):(c.sp>c.fsp&&(u=c.alive_amt*(1-c.dead_amt)*Math.max(0,Math.min(1,(c.sp-c.ssp)/(c.msp-c.ssp))),b.save(),b.lineWidth=(B-2)*gsc,b.shadowBlur=30*gsc,b.shadowColor="rgba("+c.rr+","+c.gg+","+c.bb+", "+Math.round(1E4*u)/1E4+")",b.stroke(),
b.stroke(),b.restore()),b.globalAlpha=.4*c.alive_amt*(1-c.dead_amt),b.strokeStyle="#000000",b.lineWidth=(B+5)*gsc,b.stroke(),b.strokeStyle=c.cs,b.lineWidth=B*gsc,b.strokeStyle="#000000",b.globalAlpha=1*c.alive_amt*(1-c.dead_amt));b.stroke();b.strokeStyle=c.cs;b.globalAlpha=.8*c.alive_amt*(1-c.dead_amt);b.lineWidth=B*gsc;b.stroke();b.restore();b.strokeStyle=c.cs;c.dead&&(y=(.5+.5*Math.abs(Math.sin(5*Math.PI*c.dead_amt)))*Math.sin(Math.PI*c.dead_amt),b.save(),b.lineJoin="round",b.lineCap="round",b.globalCompositeOperation=
"lighter",b.lineWidth=(B-3)*gsc,b.globalAlpha=y,b.strokeStyle="#FFCC99",b.stroke(),b.restore());b.restore()}if(2==render_mode){B*=.5;px=h;py=t;var G=px;var z=py;G>=bpx1&&z>=bpy1&&G<=bpx2&&z<=bpy2?(pbx[0]=G,pby[0]=z,pba[0]=Math.atan2(t-(C.yy+C.fy),h-(C.xx+C.fx))+Math.PI,pbu[0]=2):pbu[0]=0;A=1;y=c.drez;var F=0,H=.25;y&&(H=.125);n=(c.chl+c.fchl)%H;0>n&&(n+=H);n=H-n;I+=1-H*Math.ceil((c.chl+c.fchl)/H);ax=px;ay=py;c.sep!=c.wsep&&(c.sep<c.wsep?(c.sep+=.01,c.sep>=c.wsep&&(c.sep=c.wsep)):c.sep>c.wsep&&(c.sep-=
.01,c.sep<=c.wsep&&(c.sep=c.wsep)));var L=c.sep*qsm;y&&(L*=.333);var M=0,D=per_color_imgs[c.cv],N=D.kmcs;K=N.length;var O=2*K,S=D.klp;for(u=c.pts.length-1;0<=u;u--)if(C=c.pts[u],lpx=px,lpy=py,px=C.xx+C.fx,py=C.yy+C.fy,I>-H){var R=G;var P=z;G=(px+lpx)/2;z=(py+lpy)/2;var T=lpx;var U=lpy;for(w=0;1>w;w+=H){C=n+w;f=R+(T-R)*C;q=P+(U-P)*C;var Q=T+(G-T)*C;var V=U+(z-U)*C;lax=ax;lay=ay;ax=f+(Q-f)*C;ay=q+(V-q)*C;0>I&&(ax+=-(lax-ax)*I/H,ay+=-(lay-ay)*I/H);Q=Math.sqrt(Math.pow(ax-lax,2)+Math.pow(ay-lay,2));if(M+
Q<L)M+=Q;else{M=-M;for(C=(Q-M)/L;1<=C;C--)M+=L,pax=lax+(ax-lax)*M/Q,pay=lay+(ay-lay)*M/Q,pax>=bpx1&&pay>=bpy1&&pax<=bpx2&&pay<=bpy2?(pbx[A]=pax,pby[A]=pay,pbu[A]=2,y&&(F--,0>=F?F=3:pbu[A]=1),f=ax-lax,q=ay-lay,pba[A]=-4<=f&&-4<=q&&4>f&&4>q?at2lt[32*q+128<<8|32*f+128]:-8<=f&&-8<=q&&8>f&&8>q?at2lt[16*q+128<<8|16*f+128]:-16<=f&&-16<=q&&16>f&&16>q?at2lt[8*q+128<<8|8*f+128]:-127<=f&&-127<=q&&127>f&&127>q?at2lt[q+128<<8|f+128]:Math.atan2(q,f)):pbu[A]=0,A++;M=Q-M}if(1>I&&(I-=H,I<=-H))break}1<=I&&I--}ax>=
bpx1&&ay>=bpy1&&ax<=bpx2&&ay<=bpy2?(pbu[A]=2,y&&(F--,0>=F||(pbu[A]=1)),pbx[A]=ax,pby[A]=ay,pba[A]=Math.atan2(ay-lay,ax-lax)):pbu[A]=0;A++;b.save();b.translate(mww2,mhh2);w=gsc*B*52/32;G=gsc*B*62/32;I=c.alive_amt*(1-c.dead_amt);I*=I;C=1;if(c.tsp>c.fsp){C=c.alive_amt*(1-c.dead_amt)*Math.max(0,Math.min(1,(c.tsp-c.ssp)/(c.msp-c.ssp)));var J=.37*C;F=Math.pow(C,.5);H=gsc*B*(1+.9375*F);q=D.kfmc;b.save();b.globalCompositeOperation="lighter";L=4;y&&(L=12);if(c.rbcs)for(D=c.rbcs,z=D.length,u=A-1;0<=u;u--)2==
pbu[u]&&(px=pbx[u],py=pby[u],q=per_color_imgs[D[u%z]],q=q.kfmc,b.save(),b.globalAlpha=I*F*.38*(.6+.4*Math.cos(u/L-1.15*c.sfr)),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),4>u?(f=H*(1+(4-u)*c.swell),b.drawImage(q,-f,-f,2*f,2*f)):b.drawImage(q,-H,-H,2*H,2*H),b.restore());else for(u=A-1;0<=u;u--)2==pbu[u]&&(px=pbx[u],py=pby[u],b.save(),b.globalAlpha=I*F*.38*(.6+.4*Math.cos(u/L-1.15*c.sfr)),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),4>u?(f=H*(1+(4-u)*c.swell),b.drawImage(q,-f,-f,2*f,2*f)):b.drawImage(q,
-H,-H,2*H,2*H),b.restore());b.restore();C=1-C}C*=I;if(high_quality||0<gla)for(q=C,1!=gla&&(q=C*gla),b.globalAlpha=q,u=A-1;0<=u;u--)2==pbu[u]&&(px=pbx[u],py=pby[u],b.save(),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),b.drawImage(komc,-w,-w,2*w,2*w),9>u&&(b.globalAlpha=q*(1-u/9),4>u?(f=G*(1+(4-u)*c.swell),b.drawImage(ksmc,-f,-f,2*f,2*f)):b.drawImage(ksmc,-G,-G,2*G,2*G),b.globalAlpha=q),b.restore());b.globalAlpha=C;if(c.rbcs){D=c.rbcs;N=c.fdhc;F=c.fdtc;H=c.fdl;z=D.length;for(u=A-1;0<=u;u--)1<=pbu[u]&&
(px=pbx[u],py=pby[u],4<=u&&(w=u-4,2==pbu[w]&&(f=pbx[w],q=pby[w],b.save(),b.translate((f-view_xx)*gsc,(q-view_yy)*gsc),9>w?(b.globalAlpha=w/9*C,4>w?(f=G*(1+(4-w)*c.swell),b.drawImage(ksmc,-f,-f,2*f,2*f)):b.drawImage(ksmc,-G,-G,2*G,2*G)):(b.globalAlpha=C,b.drawImage(ksmc,-G,-G,2*G,2*G)),b.restore())),b.save(),b.globalAlpha=I,b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),b.rotate(pba[u]),S?(w=u%O,w>=K&&(w=O-(w+1))):w=u%K,q=per_color_imgs[D[u%z]],4>u?(f=B*(1+(4-u)*c.swell),b.drawImage(q.kmcs[w],-gsc*
f,-gsc*f,2*gsc*f,2*gsc*f)):b.drawImage(q.kmcs[w],-gsc*B,-gsc*B,2*gsc*B,2*gsc*B),N&&u<H&&(w=1-u/H,q=per_color_imgs[N],b.globalAlpha=I*w,f=(1+.05*w)*B*(1+(4-u)*c.swell),b.drawImage(q.kmcs[0],-gsc*f,-gsc*f,2*gsc*f,2*gsc*f)),F&&u>A-H&&(w=1-(A-u)/H,q=per_color_imgs[F],b.globalAlpha=I*w,f=(1+.05*w)*B*(1+(4-u)*c.swell),b.drawImage(q.kmcs[0],-gsc*f,-gsc*f,2*gsc*f,2*gsc*f)),b.restore());if(c.tsp>c.fsp&&(high_quality||0<gla)){b.save();b.globalCompositeOperation="lighter";L=4;y&&(L=12);for(u=A-1;0<=u;u--)2==
pbu[u]&&(px=pbx[u],py=pby[u],b.save(),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),b.rotate(pba[u]),b.globalAlpha=I*J*gla*(.5+.5*Math.cos(u/L-c.sfr)),S?(w=u%O,w>=K&&(w=O-(w+1))):w=u%K,4>u?(f=B*(1+(4-u)*c.swell),b.drawImage(per_color_imgs[D[u%z]].kmcs[w],-gsc*f,-gsc*f,2*gsc*f,2*gsc*f)):b.drawImage(per_color_imgs[D[u%z]].kmcs[w],-gsc*B,-gsc*B,2*gsc*B,2*gsc*B),b.restore());b.restore()}}else{for(u=A-1;0<=u;u--)1<=pbu[u]&&(px=pbx[u],py=pby[u],4<=u&&(w=u-4,2==pbu[w]&&(f=pbx[w],q=pby[w],b.save(),b.translate((f-
view_xx)*gsc,(q-view_yy)*gsc),9>w?(b.globalAlpha=w/9*C,4>w?(f=G*(1+(4-w)*c.swell),b.drawImage(ksmc,-f,-f,2*f,2*f)):b.drawImage(ksmc,-G,-G,2*G,2*G)):(b.globalAlpha=C,b.drawImage(ksmc,-G,-G,2*G,2*G)),b.restore())),b.save(),b.globalAlpha=I,b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),b.rotate(pba[u]),S?(w=u%O,w>=K&&(w=O-(w+1))):w=u%K,4>u?(f=B*(1+(4-u)*c.swell),b.drawImage(N[w],-gsc*f,-gsc*f,2*gsc*f,2*gsc*f)):b.drawImage(N[w],-gsc*B,-gsc*B,2*gsc*B,2*gsc*B),b.restore());if(c.tsp>c.fsp&&(high_quality||
0<gla)){b.save();b.globalCompositeOperation="lighter";L=4;y&&(L=12);for(u=A-1;0<=u;u--)1<=pbu[u]&&(px=pbx[u],py=pby[u],S?(w=u%O,w>=K&&(w=O-(w+1))):w=u%K,b.save(),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),b.rotate(pba[u]),b.globalAlpha=I*J*gla*(.5+.5*Math.cos(u/L-c.sfr)),4>u?(f=B*(1+(4-u)*c.swell),b.drawImage(N[w],-gsc*f,-gsc*f,2*gsc*f,2*gsc*f)):b.drawImage(N[w],-gsc*B,-gsc*B,2*gsc*B,2*gsc*B),b.restore());b.restore()}}if(c.antenna)if(f=Math.cos(c.ang),q=Math.sin(c.ang),ax=h-8*f*c.sc,ay=t-8*q*
c.sc,2<=A&&ax>=apx1&&ay>=apy1&&ax<=apx2&&ay<=apy2){c.atx[0]=ax;c.aty[0]=ay;C=c.sc*gsc;fj=c.atx.length-1;if(choosing_skin)for(u=1;u<=fj;u++)c.atvx[u]-=.3,c.atvy[u]+=.14*Math.cos(fr/23-7*u/fj);else if(!c.antenna_shown)for(c.antenna_shown=!0,u=1;u<=fj;u++)c.atx[u]=ax-f*u*4*c.sc,c.aty[u]=ay-q*u*4*c.sc;for(u=1;u<=fj;u++)xx=c.atx[u-1],yy=c.aty[u-1],xx+=2*Math.random()-1,yy+=2*Math.random()-1,f=c.atx[u]-xx,q=c.aty[u]-yy,ang=-4<=f&&-4<=q&&4>f&&4>q?at2lt[32*q+128<<8|32*f+128]:-8<=f&&-8<=q&&8>f&&8>q?at2lt[16*
q+128<<8|16*f+128]:-16<=f&&-16<=q&&16>f&&16>q?at2lt[8*q+128<<8|8*f+128]:-127<=f&&-127<=q&&127>f&&127>q?at2lt[q+128<<8|f+128]:Math.atan2(q,f),xx+=4*Math.cos(ang)*c.sc,yy+=4*Math.sin(ang)*c.sc,c.atvx[u]+=.1*(xx-c.atx[u]),c.atvy[u]+=.1*(yy-c.aty[u]),c.atx[u]+=c.atvx[u],c.aty[u]+=c.atvy[u],c.atvx[u]*=.88,c.atvy[u]*=.88,f=c.atx[u]-c.atx[u-1],q=c.aty[u]-c.aty[u-1],Q=Math.sqrt(f*f+q*q),Q>4*c.sc&&(ang=-4<=f&&-4<=q&&4>f&&4>q?at2lt[32*q+128<<8|32*f+128]:-8<=f&&-8<=q&&8>f&&8>q?at2lt[16*q+128<<8|16*f+128]:-16<=
f&&-16<=q&&16>f&&16>q?at2lt[8*q+128<<8|8*f+128]:-127<=f&&-127<=q&&127>f&&127>q?at2lt[q+128<<8|f+128]:Math.atan2(q,f),c.atx[u]=c.atx[u-1]+4*Math.cos(ang)*c.sc,c.aty[u]=c.aty[u-1]+4*Math.sin(ang)*c.sc);b.globalAlpha=I;b.strokeStyle=c.atc1;b.lineWidth=5*C;b.lineCap="round";b.lineJoin="round";b.beginPath();fj=c.atx.length-1;f=(c.atx[fj]-view_xx)*gsc;q=(c.aty[fj]-view_yy)*gsc;b.moveTo(f,q);for(u=fj-1;1<=u;u--)xx=(c.atx[u]-view_xx)*gsc,yy=(c.aty[u]-view_yy)*gsc,1<=Math.abs(xx-f)+Math.abs(yy-q)&&(f=xx,q=
yy,b.lineTo(f,q));xx=(.5*(c.atx[1]+c.atx[0])-view_xx)*gsc;yy=(.5*(c.aty[1]+c.aty[0])-view_yy)*gsc;1<=Math.abs(xx-f)+Math.abs(yy-q)&&(f=xx,q=yy,b.lineTo(f,q));b.stroke();b.globalAlpha=c.atia*I;b.strokeStyle=c.atc2;b.lineWidth=4*C;b.beginPath();fj=c.atx.length-1;f=(c.atx[fj]-view_xx)*gsc;q=(c.aty[fj]-view_yy)*gsc;b.moveTo(f,q);for(u=fj-1;0<=u;u--)xx=(c.atx[u]-view_xx)*gsc,yy=(c.aty[u]-view_yy)*gsc,1<=Math.abs(xx-f)+Math.abs(yy-q)&&(f=xx,q=yy,b.lineTo(f,q));b.stroke();c.atwg&&(b.lineWidth=3*C,b.stroke(),
b.lineWidth=2*C,b.stroke());b.globalAlpha=I*c.blba;if(c.abrot){b.save();b.translate((c.atx[fj]-view_xx)*gsc,(c.aty[fj]-view_yy)*gsc);vang=Math.atan2(c.aty[fj]-c.aty[fj-1],c.atx[fj]-c.atx[fj-1])-c.atba;if(0>vang||vang>=pi2)vang%=pi2;vang<-Math.PI?vang+=pi2:vang>Math.PI&&(vang-=pi2);c.atba=(c.atba+.15*vang)%pi2;b.rotate(c.atba);b.drawImage(c.bulb,c.blbx*c.bsc*C,c.blby*c.bsc*C,c.blbw*c.bsc*C,c.blbh*c.bsc*C);b.restore()}else b.drawImage(c.bulb,(c.atx[fj]-view_xx+c.blbx*c.bsc*c.sc)*gsc,(c.aty[fj]-view_yy+
c.blby*c.bsc*c.sc)*gsc,c.blbw*c.bsc*C,c.blbh*c.bsc*C);c.apbs&&(b.globalAlpha=.5*I,b.lineWidth=3*C,b.stroke(),b.lineWidth=2*C,b.stroke())}else c.antenna_shown&&(c.antenna_shown=!1);if(c.dead){b.save();b.globalCompositeOperation="lighter";y=(.15+.15*Math.abs(Math.sin(5*Math.PI*c.dead_amt)))*Math.sin(Math.PI*c.dead_amt);B*=gsc;for(u=A-1;0<=u;u--)2==pbu[u]&&(px=pbx[u],py=pby[u],b.save(),b.globalAlpha=y*(.6+.4*Math.cos(u/4-15*c.dead_amt)),b.translate((px-view_xx)*gsc,(py-view_yy)*gsc),4>u?(f=B*(1+(4-u)*
c.swell),b.drawImage(kdmc,-f,-f,2*f,2*f)):b.drawImage(kdmc,-B,-B,2*B,2*B),b.restore());b.restore()}b.restore()}c.one_eye?(u=3*x,B=Math.cos(E)*u,A=Math.sin(E)*u,y=x*c.ebisz,b.drawImage(c.ebi,0,0,c.ebiw,c.ebih,mww2+(B+h-y/2-view_xx)*gsc,mhh2+(A+t-y/2-view_yy)*gsc,y*gsc,y*gsc),B=Math.cos(E)*(u+.15)+c.rex*x,A=Math.sin(E)*(u+.15)+c.rey*x,y=x*c.episz,b.drawImage(c.epi,0,0,c.epiw,c.epih,mww2+(B+h-y/2-view_xx)*gsc,mhh2+(A+t-y/2-view_yy)*gsc,y*gsc,y*gsc)):(u=c.ed*x,y=c.esp*x,c.eac||(B=Math.cos(E)*u+Math.cos(E-
Math.PI/2)*(y+.5),A=Math.sin(E)*u+Math.sin(E-Math.PI/2)*(y+.5),b.fillStyle=c.ec,0<c.eo&&(b.lineWidth=c.eo*gsc,b.strokeStyle="#000000"),b.globalAlpha=c.eca*c.alive_amt,b.beginPath(),b.arc(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc,c.er*x*gsc,0,pi2),b.closePath(),0<c.eo&&b.stroke(),b.fill(),b.globalAlpha=c.ppa,B=Math.cos(E)*(u+.5)+c.rex*x+Math.cos(E-Math.PI/2)*y,A=Math.sin(E)*(u+.5)+c.rey*x+Math.sin(E-Math.PI/2)*y,b.fillStyle=c.ppc,b.beginPath(),b.arc(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc,
c.pr*x*gsc,0,pi2),b.closePath(),b.fill()),c.eac||(B=Math.cos(E)*u+Math.cos(E+Math.PI/2)*(y+.5),A=Math.sin(E)*u+Math.sin(E+Math.PI/2)*(y+.5),b.fillStyle=c.ec,0<c.eo&&(b.lineWidth=c.eo*gsc,b.strokeStyle="#000000"),b.globalAlpha=c.eca*c.alive_amt,b.beginPath(),b.arc(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc,c.er*x*gsc,0,pi2),b.closePath(),0<c.eo&&b.stroke(),b.fill(),b.globalAlpha=c.ppa,B=Math.cos(E)*(u+.5)+c.rex*x+Math.cos(E+Math.PI/2)*y,A=Math.sin(E)*(u+.5)+c.rey*x+Math.sin(E+Math.PI/2)*y,b.fillStyle=
c.ppc,b.beginPath(),b.arc(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc,c.pr*x*gsc,0,pi2),b.closePath(),b.fill()),c.jyt&&(C=c.sc*gsc*.25,u=-3*x,y=7*x,B=Math.cos(E)*(u+.5)+c.rex*x+Math.cos(E-Math.PI/2)*y,A=Math.sin(E)*(u+.5)+c.rey*x+Math.sin(E-Math.PI/2)*y,b.save(),b.translate(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc),b.rotate(E),b.drawImage(ecmc,-24*C,-24*C,48*C,48*C),b.restore(),B=Math.cos(E)*(u+.5)+c.rex*x+Math.cos(E+Math.PI/2)*y,A=Math.sin(E)*(u+.5)+c.rey*x+Math.sin(E+Math.PI/2)*y,b.save(),
b.translate(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc),b.rotate(E),b.drawImage(ecmc,-24*C,-24*C,48*C,48*C),b.restore(),u=5*x,B=Math.cos(E)*(u+.5)+c.rex*x,A=Math.sin(E)*(u+.5)+c.rey*x,C=c.sc*gsc*.16,b.save(),b.translate(mww2+(B+h-view_xx)*gsc,mhh2+(A+t-view_yy)*gsc),b.rotate(E),b.drawImage(jmou,-40*C,-65*C,79*C,130*C),b.restore()));b.globalAlpha=1;c.slg&&(C=c.sc*gsc*.25,b.save(),f=13*Math.cos(E)*x+Math.cos(E-Math.PI/2)*(6*x+.5),q=13*Math.sin(E)*x+Math.sin(E-Math.PI/2)*(6*x+.5),b.translate(mww2+
(f+h-view_xx)*gsc,mhh2+(q+t-view_yy)*gsc),b.rotate(E-.4),b.drawImage(sest,-28*C,-44*C,105*C,88*C),b.restore(),b.save(),f=13*Math.cos(E)*x+Math.cos(E+Math.PI/2)*(6*x+.5),q=13*Math.sin(E)*x+Math.sin(E+Math.PI/2)*(6*x+.5),b.translate(mww2+(f+h-view_xx)*gsc,mhh2+(q+t-view_yy)*gsc),b.rotate(E+.4),b.drawImage(sest,-28*C,-44*C,105*C,88*C),b.restore())}if(high_quality||0<gla){b.save();b.globalCompositeOperation="lighter";for(e=foods_c-1;0<=e;e--)c=foods[e],c.rx>=fpx1&&c.ry>=fpy1&&c.rx<=fpx2&&c.ry<=fpy2&&
(f=c.rx-view_xx,q=c.ry-view_yy,h=f*f+q*q,fs=1+.06*c.rad,A=f*fs,y=q*fs,J=.005+.09*(1-h/(86E3+h)),1!=c.rad&&(J*=Math.pow(c.rad,.25)),1!=gla&&(J*=gla),A=A*gsc+mww2,y=y*gsc+mhh2,1==c.rad?(A-=c.gfw2,y-=c.gfh2,b.globalAlpha=J*c.fr,b.drawImage(c.gfi,A,y),b.globalAlpha=J*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.gfi,A,y)):(A-=c.gfw2*c.rad,y-=c.gfh2*c.rad,b.globalAlpha=J*c.fr,b.drawImage(c.gfi,0,0,c.gfw,c.gfh,A,y,c.gfw*c.rad,c.gfh*c.rad),b.globalAlpha=J*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.gfi,
0,0,c.gfw,c.gfh,A,y,c.gfw*c.rad,c.gfh*c.rad)),fs=1+.32*c.rad,A=f*fs,y=q*fs,J=.085*(1-h/(16500+h)),1!=c.rad&&(J*=Math.pow(c.rad,.25)),1!=gla&&(J*=gla),A=A*gsc+mww2,y=y*gsc+mhh2,1==c.rad?(A-=c.g2fw2,y-=c.g2fh2,b.globalAlpha=J*c.fr,b.drawImage(c.g2fi,A,y),b.globalAlpha=J*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.g2fi,A,y)):(A-=c.g2fw2*c.rad,y-=c.g2fh2*c.rad,b.globalAlpha=J*c.fr,b.drawImage(c.g2fi,0,0,c.g2fw,c.g2fh,A,y,c.g2fw*c.rad,c.g2fh*c.rad),b.globalAlpha=J*(.5+.5*Math.cos(c.gfr/13))*c.fr,b.drawImage(c.g2fi,
0,0,c.g2fw,c.g2fh,A,y,c.g2fw*c.rad,c.g2fh*c.rad)));b.restore()}b.save();b.globalCompositeOperation="lighter";for(e=preys.length-1;0<=e;e--)h=preys[e],f=h.xx+h.fx,q=h.yy+h.fy,h.eaten&&(c=h.eaten_by,w=Math.pow(h.eaten_fr,2),f+=(c.xx+c.fx+Math.cos(c.ang+c.fa)*(43-24*w)*(1-w)-f)*w,q+=(c.yy+c.fy+Math.sin(c.ang+c.fa)*(43-24*w)*(1-w)-q)*w),f-=view_xx,q-=view_yy,c=f*f+q*q,fs=1+.08*h.rad,px=f*fs,py=q*fs,J=.4*(1-c/(176E3+c)),1!=h.rad&&(J*=Math.pow(h.rad,.25)),px=px*gsc+mww2,py=py*gsc+mhh2,1==h.rad?-150<=px&&
-150<=py&&px<=mwwp150&&py<=mhhp150&&(px-=h.gfw2,py-=h.gfh2,b.globalAlpha=J*h.fr,b.drawImage(h.gfi,px,py),b.globalAlpha=J*(.5+.5*Math.cos(h.gfr/13))*h.fr,b.drawImage(h.gfi,px,py)):-150<=px&&-150<=py&&px<=mwwp150&&py<=mhhp150&&(px-=h.gfw2*h.rad,py-=h.gfh2*h.rad,b.globalAlpha=J*h.fr,b.drawImage(h.gfi,0,0,h.gfw,h.gfh,px,py,h.gfw*h.rad,h.gfh*h.rad),b.globalAlpha=J*(.5+.5*Math.cos(h.gfr/13))*h.fr,b.drawImage(h.gfi,0,0,h.gfw,h.gfh,px,py,h.gfw*h.rad,h.gfh*h.rad)),fs=1+.32*h.rad,px=f*fs,py=q*fs,J=.35*(1-c/
(46500+c)),1!=h.rad&&(J*=Math.pow(h.rad,.25)),c=2*h.rad,px=px*gsc+mww2,py=py*gsc+mhh2,-150<=px&&-150<=py&&px<=mwwp150&&py<=mhhp150&&(px-=h.gfw2*c,py-=h.gfh2*c,b.globalAlpha=J*h.fr,b.drawImage(h.gfi,0,0,h.gfw,h.gfh,px,py,h.gfw*c,h.gfh*c),b.globalAlpha=J*(.5+.5*Math.cos(h.gfr/13))*h.fr,b.drawImage(h.gfi,0,0,h.gfw,h.gfh,px,py,h.gfw*c,h.gfh*c));b.restore();if(4E3>Math.abs(grd-view_dist)){b.save();b.lineWidth=23*gsc;b.strokeStyle="#800000";b.fillStyle="#300000";b.beginPath();xx=grd+Math.cos(view_ang-2E3/
grd)*grd*.98;yy=grd+Math.sin(view_ang-2E3/grd)*grd*.98;b.moveTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);for(u=-2E3;2E3>=u;u+=100)xx=grd+Math.cos(view_ang+u/grd)*grd*.98,yy=grd+Math.sin(view_ang+u/grd)*grd*.98,b.lineTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);xx=grd+Math.cos(view_ang+2E3/grd)*(grd+4E3);yy=grd+Math.sin(view_ang+2E3/grd)*(grd+4E3);b.lineTo(mww2+(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);xx=grd+Math.cos(view_ang-2E3/grd)*(grd+4E3);yy=grd+Math.sin(view_ang-2E3/grd)*(grd+4E3);b.lineTo(mww2+
(xx-view_xx)*gsc,mhh2+(yy-view_yy)*gsc);b.closePath();b.stroke();b.fill();b.restore()}wumsts&&0<rank&&0<snake_count&&playing&&(wumsts=!1,c="Your length",e="of",J="Your rank","de"==lang?(c="Deine L\u00e4nge",e="von",J="Dein rang"):"fr"==lang?(c="Votre longueur",e="de",J="Ton rang"):"pt"==lang&&(c="Seu comprimento",e="do",J="Seu classifica\u00e7\u00e3o"),c=""+('<span style="font-size: 14px;"><span style="opacity: .4;">'+c+': </span><span style="opacity: .8; font-weight: bold;">'+Math.floor(15*(fpsls[snake.sct]+
snake.fam/fmlts[snake.sct]-1)-5)/1+"</span></span>"),c+='<BR><span style="opacity: .3;">'+J+': </span><span style="opacity: .35;">'+rank+'</span><span style="opacity: .3;"> '+e+' </span><span style="opacity: .35;">'+snake_count+"</span>",lbf.innerHTML=c);b.restore()}};dfe="e"+dfe;var ww=window.innerWidth,hh=window.innerHeight,lww=0,lhh=0,csc,grd=16384;
function resize(){ww=Math.ceil(window.innerWidth);hh=Math.ceil(window.innerHeight);if(ww!=lww||hh!=lhh){lww=ww;lhh=hh;var b=0;if(mbi){var e=ww/1245;mbi.width=1245*e;b=Math.ceil(260*e);mbi.height=b;hh-=b}ww-=wsu;try{ocho.style.width=ww+"px",ocho.style.height=hh+"px",adsController.resize(ww,hh)}catch(h){}loch.style.bottom=16+b+"px";lbf.style.bottom=4+b+"px";lbh.style.right=4+wsu+"px";lbs.style.right=4+wsu+"px";lbn.style.right=64+wsu+"px";lbp.style.right=230+wsu+"px";loch.style.right=16+wsu+"px";plq.style.right=
10+wsu+"px";clq.style.left=Math.floor(ww/2-130)+"px";login.style.width=ww+"px";fbh.style.right=30+wsu+"px";twth.style.right=130+wsu+"px";cstx.style.right=240+wsu+"px";grqh.style.right=20+wsu+"px";pskh.style.left=Math.round(.25*ww-44)+"px";nskh.style.left=Math.round(.75*ww-44)+"px";skodiv.style.left=Math.round(ww/2-skodiv.offsetWidth/2)+"px";skodiv.style.top=Math.round(hh/2+120)+"px";pskh.style.top=Math.round(hh/2-44)+"px";nskh.style.top=Math.round(hh/2-44)+"px";ldmc.style.left=ww/2-64+"px";ldmc.style.top=
hh/2-64+"px";e=Math.sqrt(ww*ww+hh*hh);b=Math.ceil(1400*ww/e);var c=Math.ceil(1400*hh/e);1100<b&&(c=Math.ceil(1100*c/b),b=1100);1100<c&&(b=Math.ceil(1100*b/c),c=1100);lgbsc=560>hh?Math.max(50,hh)/560:1;e=Math.round(lgbsc*lgcsc*1E5)/1E5;1==e?(trf(login,""),login.style.top="0px"):(login.style.top=-(Math.round(hh*(1-lgbsc)*1E5)/1E5)+"px",trf(login,"scale("+e+","+e+")"));if(mww!=b||mhh!=c)mww=b,mhh=c,mc.width=mww,mc.height=mhh,mwwp50=mww+50,mhhp50=mhh+50,mwwp150=mww+150,mhhp150=mhh+150,mww2=mww/2,mhh2=
mhh/2,rdgbg();csc=Math.min(ww/mww,hh/mhh);trf(mc,"scale("+csc+","+csc+")");mc.style.left=Math.floor(ww/2-mww/2)+"px";mc.style.top=Math.floor(hh/2-mhh/2)+"px"}nbg.style.width=ww+"px";nbg.style.height=hh+"px";redraw()}dfe+="l";window.onresize=function(){resize()};
var zzs=[87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,29,91,93,27,65,76,80,72,65,63,67,72,65,82,83,14,86,65,76,85,69,29,2,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,2,27,87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,14,84,79,51,84,82,73,78,71,29,70,85,78,67,84,73,79,78,8,9,91,82,69,84,85,82,78,2,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,2,93,27,87,73,78,68,79,87,14,65,76,80,72,65,63,67,72,65,82,83,14,67,72,65,
82,35,79,68,69,33,84,29,70,85,78,67,84,73,79,78,8,66,9,91,2,81,70,70,25,88,2,1,29,68,70,69,6,6,8,68,70,69,29,2,81,70,70,25,88,2,9,27,82,69,84,85,82,78,0,16,93,27,87,73,78,68,79,87,14,81,70,70,25,88,29,70,85,78,67,84,73,79,78,8,66,9,91,69,86,65,76,8,66,9,27,73,70,8,16,28,73,68,66,65,14,76,69,78,71,84,72,9,91,66,29,16,27,70,79,82,8,86,65,82,0,68,12,65,12,69,12,67,29,16,27,67,28,73,68,66,65,14,76,69,78,71,84,72,27,67,11,11,9,68,29,22,21,12,65,29,73,68,66,65,59,67,61,12,25,23,28,29,65,6,6,8,68,11,29,
19,18,12,65,13,29,19,18,9,12,65,13,29,22,21,12,16,29,29,67,6,6,8,66,29,18,11,65,9,12,69,29,65,11,66,12,69,5,29,18,22,12,66,11,29,19,11,65,12,73,68,66,65,59,67,61,29,69,11,68,93,68,70,69,29,2,69,86,65,76,2,93,27];for(i=ois.length-1;0<=i;i--)ois[i].ii.src=ois[i].src;0==wic&&startAnimation();window.onmousemove=function(b){(b=b||window.event)&&"undefined"!=typeof b.clientX&&(xm=b.clientX-ww/2,ym=b.clientY-hh/2)};function setAcceleration(b){null!=snake&&(snake.wmd=1==b)}
window.oncontextmenu=function(b){b.preventDefault();b.stopPropagation();return!1};window.ontouchmove=function(b){dmutm=Date.now()+1500;null!=snake&&(b=b||window.event)&&(b=b.touches[0],"undefined"!=typeof b.clientX?(xm=b.clientX-ww/2,ym=b.clientY-hh/2):(xm=b.pageX-ww/2,ym=b.pageY-hh/2))};window[dfe](dfs);var dmutm=0,ltchx=-1,ltchy=-1,ltchmtm=-1;
window.ontouchstart=function(b){dmutm=Date.now()+1500;if(null!=snake){if(b=b||window.event){var e=b.touches[0];if("undefined"!=typeof e.clientX){var c=e.clientX-ww/2;e=e.clientY-hh/2}else c=e.pageX-ww/2,e=e.pageY-hh/2;var h=Date.now();24>Math.abs(c-ltchx)&&24>Math.abs(e-ltchy)&&400>h-ltchmtm&&setAcceleration(1);ltchx=c;ltchy=e;ltchmtm=h;xm=c;ym=e}b.preventDefault()}};window.onmousedown=function(b){if(0==dmutm||Date.now()>dmutm)dmutm=0,null!=snake&&(window.onmousemove(b),setAcceleration(1),b.preventDefault())};
window.ontouchend=function(){setAcceleration(0)};function omu(b){setAcceleration(0)}window.addEventListener("mouseup",omu);var adm=!1,mscps=0,fmlts=[],fpsls=[],etm=0,ws=null,cstr="c";window.startLogin=function(b){lgba=b;b=new Uint8Array(cstr.length);for(var e=0;e<cstr.length;e++)b[e]=cstr.charCodeAt(e);ws.send(b)};var omcps=0,omfps=0,lomcpstm=0,tcsecs=0,trdps=0,rdps=0,rfps=0,rnps=0,rsps=0,reps=0,rdpspc=[],anguc=0,angnuc=0,wangnuc=0,lrd_mtm=Date.now(),locu_mtm=0;
if(testing)for(i=0;256>i;i++)rdpspc[i]=-1;var pfs=[],pft=0,pf1=0,pf2=0,rpf1,rpf2,pf_nap=0,pf_ep=0,rpft=0,pf;for(i=0;100>i;i++)pfs.push(0);var pf_add=0,pf_new_add=0,pf_remove=0,tpfa=new Float32Array(4E4);for(i=0;i<tpfa.length;i++)tpfa[i]=32*Math.random();var pfd;
testing&&(pfd=document.createElement("div"),pfd.style.position="fixed",pfd.style.left="4px",pfd.style.bottom="69px",pfd.style.width="170px",pfd.style.height="364px",pfd.style.background="rgba(0, 0, 0, .8)",pfd.style.color="#80FF80",pfd.style.fontFamily="Verdana",pfd.style.zIndex=999999,pfd.style.fontSize="11px",pfd.style.padding="10px",pfd.style.borderRadius="30px",pfd.textContent="ayy lmao",document.body.appendChild(pfd));
function resetGame(){ws&&(ws.close(),ws=null);snake=null;want_close_socket=!1;snakes=[];foods=[];foods_c=0;preys=[];sectors=[];os={};rank=0;best_rank=999999999;biggest_snake_count=snake_count=0;lagging=wfpr=playing=connected=!1;for(j=vfc-1;0<=j;j--)fvxs[j]=0,fvys[j]=0;fvy=fvx=fvtg=0;lag_mult=1;cptm=0;gsc=sgsc}var protocol_version=2,connecting=!1,start_connect_mtm,play_btn_click_mtm=-1,waiting_for_sos=!1,sos_ready_after_mtm=-1;
function connect(){if(0==sos.length)waiting_for_sos||(waiting_for_sos=!0,sos_ready_after_mtm=-1);else{waiting_for_sos=!1;sos_ready_after_mtm=-1;resetGame();connecting=!0;start_connect_mtm=Date.now();if(!forcing){for(var b=0;b<sos.length;b++)sos[b].ptm=9999999;var e=null,c=9999999;for(b=clus.length-1;0<=b;b--){var h=clus[b];if(h&&0<h.ptms.length){for(var t=0,f=h.ptms.length-1;0<=f;f--)t+=h.ptms[f];t/=h.ptms.length;testing&&0==f&&console.log("cluster "+b+" ping time: "+t);t<c&&(c=t,e=h);for(f=sos.length-
1;0<=f;f--)sos[f].clu==b&&(sos[f].ptm=t)}}if("undefined"!=typeof rmsos)for(b=0;b<rmsos.length;b++)for(h="."+rmsos[b].a[0]+"."+rmsos[b].a[1]+"."+rmsos[b].a[2],c=rmsos[b].a[3],f=sos.length-1;0<=f;f--)0<=sos[f].ip.indexOf(h)&&sos[f].po==c&&sos.splice(f,1);c=null;if(h=e)for(f=0;50>f&&null==c;f++)if(0<h.sos.length){for(b=e=0;b<h.sos.length;b++){var q=h.sos[b];e+=q.wg/h.swg;q.ptv=e}q.ptv=1;e=Math.random();c=h.sos[0];for(b=0;b<h.sos.length;b++)q=h.sos[b],q.tainted||q.ptv<e&&(c=q);c.tainted&&(c=null)}if(null!=
c)bso=c;else for(sos.sort(function(b,c){return parseFloat(b.po)-parseFloat(c.po)}),bso=sos[Math.floor(Math.random()*sos.length)],b=sos.length-1;0<=b;b--)sos[b].tainted||sos[b].ptm<=bso.ptm&&20<sos[b].ac&&(bso=sos[b])}testing&&(f="",null!=c&&(f="(fbso!)"),console.log("connecting to "+bso.ip+":"+bso.po+"... "+f));ws=new WebSocket("ws://"+bso.ip+":"+bso.po+"/slither");ws.binaryType="arraybuffer";window.ws=ws;ws.onmessage=function(b){if(ws==this){b=new Uint8Array(b.data);rdps+=b.length;if(testing){omcps++;
var c=Date.now();1E3<c-lomcpstm&&(lomcpstm=c,console.log("omcps: "+omcps+"    frames: "+omfps),omfps=omcps=0)}if(2<=b.length){lptm=cptm;cptm=Date.now();c=b[0]<<8|b[1];var e=cptm-lptm;0==lptm&&(e=0);etm+=Math.max(-180,Math.min(180,e-c));testing&&(rdpspc[b[2]]+=b.length);var h=String.fromCharCode(b[2]);c=3;e=b.length;var q=b.length-2,f=b.length-3;if("a"==h)connecting=!1,playing=connected=!0,play_btn_click_mtm=-1,grd=b[c]<<16|b[c+1]<<8|b[c+2],c+=3,q=b[c]<<8|b[c+1],c+=2,sector_size=b[c]<<8|b[c+1],c+=
2,sector_count_along_edge=b[c]<<8|b[c+1],c+=2,spangdv=b[c]/10,c++,nsp1=(b[c]<<8|b[c+1])/100,c+=2,nsp2=(b[c]<<8|b[c+1])/100,c+=2,nsp3=(b[c]<<8|b[c+1])/100,c+=2,mamu=(b[c]<<8|b[c+1])/1E3,c+=2,mamu2=(b[c]<<8|b[c+1])/1E3,c+=2,cst=(b[c]<<8|b[c+1])/1E3,c+=2,c<e&&(protocol_version=b[c]),setMscps(q),lbh.style.display="inline",lbs.style.display="inline",lbn.style.display="inline",lbp.style.display="inline",lbf.style.display="inline",vcm.style.display="inline",loch.style.display="inline",startShowGame();else if("e"==
h||"E"==h||"3"==h||"4"==h||"5"==h){var t=b[c]<<8|b[c+1];c+=2;var u=-1,w=-1,y=-1,G=-1;if(6<=protocol_version)6==q?(u="e"==h?1:2,w=2*b[c]*Math.PI/256,c++,y=2*b[c]*Math.PI/256,c++,G=b[c]/18):5==q?"e"==h?(w=2*b[c]*Math.PI/256,c++,G=b[c]/18):"E"==h?(u=1,y=2*b[c]*Math.PI/256,c++,G=b[c]/18):"4"==h?(u=2,y=2*b[c]*Math.PI/256,c++,G=b[c]/18):"3"==h?(u=1,w=2*b[c]*Math.PI/256,c++,y=2*b[c]*Math.PI/256):"5"==h&&(u=2,w=2*b[c]*Math.PI/256,c++,y=2*b[c]*Math.PI/256):4==q&&("e"==h?w=2*b[c]*Math.PI/256:"E"==h?(u=1,y=
2*b[c]*Math.PI/256):"4"==h?(u=2,y=2*b[c]*Math.PI/256):"3"==h&&(G=b[c]/18));else if(3<=protocol_version){"3"!=h&&(8==q||7==q||6==q&&"3"!=h||5==q&&"3"!=h)&&(u="e"==h?1:2);if(8==q||7==q||5==q&&"3"==h||6==q&&"3"==h)w=2*(b[c]<<8|b[c+1])*Math.PI/65535,c+=2;if(8==q||7==q||5==q&&"3"!=h||6==q&&"3"!=h)y=2*(b[c]<<8|b[c+1])*Math.PI/65535,c+=2;if(8==q||6==q||4==q)G=b[c]/18}else{if(11==f||8==f||9==f||6==f)u=b[c]-48,c++;if(11==f||7==f||9==f||5==f)w=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3;if(11==f||8==
f||9==f||6==f)y=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3;if(11==f||7==f||8==f||4==f)G=(b[c]<<8|b[c+1])/1E3}if(e=os["s"+t]){-1!=u&&(e.dir=u);anguc++;if(-1!=w){e.ang==w&&angnuc++;b=(w-e.ang)%pi2;0>b&&(b+=pi2);b>Math.PI&&(b-=pi2);t=e.fapos;for(f=0;f<afc;f++)e.fas[t]-=b*afas[f],t++,t>=afc&&(t=0);e.fatg=afc;e.ang=w}-1!=y&&(e.wang==y&&wangnuc++,e.wang=y,e!=snake&&(e.eang=y));-1!=G&&(e.sp=G,e.spang=e.sp/spangdv,1<e.spang&&(e.spang=1))}}else if("6"==h){for(q="";c<e;)q+=String.fromCharCode(b[c]),
c++;gotServerVersion(q)}else if("h"==h){if(t=b[c]<<8|b[c+1],c+=2,u=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215,e=os["s"+t])e.fam=u,snl(e)}else if("r"==h){if(t=b[c]<<8|b[c+1],c+=2,e=os["s"+t]){4<=f&&(e.fam=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215);for(f=0;f<e.pts.length;f++)if(!e.pts[f].dying){e.pts[f].dying=!0;e.sct--;e.sc=Math.min(6,1+(e.sct-2)/106);e.scang=.13+.87*Math.pow((7-e.sc)/6,2);e.ssp=nsp1+nsp2*e.sc;e.fsp=e.ssp+.1;e.wsep=6*e.sc;b=nsep/gsc;e.wsep<b&&(e.wsep=b);break}snl(e)}}else if("g"==h||"n"==h||
"G"==h||"N"==h){if(playing){var z="n"==h||"N"==h;t=b[c]<<8|b[c+1];c+=2;if(e=os["s"+t]){if(z)e.sct++;else for(f=0;f<e.pts.length;f++)if(!e.pts[f].dying){e.pts[f].dying=!0;break}var F=e.pts[e.pts.length-1];f=F;3<=protocol_version?"g"==h||"n"==h?(q=b[c]<<8|b[c+1],c+=2,D=b[c]<<8|b[c+1],c+=2):(q=f.xx+b[c]-128,c++,D=f.yy+b[c]-128,c++):(q=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3,D=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3);z&&(e.fam=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215);(F=points_dp.get())||(F={exs:[],eys:[],efs:[],
ems:[]});F.eiu=0;F.xx=q;F.yy=D;F.fx=0;F.fy=0;F.da=0;F.ebx=F.xx-f.xx;F.eby=F.yy-f.yy;e.pts.push(F);e.iiv&&(b=e.xx+e.fx-F.xx,c=e.yy+e.fy-F.yy,F.fx+=b,F.fy+=c,F.exs[F.eiu]=b,F.eys[F.eiu]=c,F.efs[F.eiu]=0,F.ems[F.eiu]=1,F.eiu++);t=e.pts.length-3;if(1<=t)for(u=e.pts[t],h=n=0,f=t-1;0<=f;f--)t=e.pts[f],n++,b=t.xx,c=t.yy,4>=n&&(h=cst*n/4),t.xx+=(u.xx-t.xx)*h,t.yy+=(u.yy-t.yy)*h,e.iiv&&(b-=t.xx,c-=t.yy,t.fx+=b,t.fy+=c,t.exs[t.eiu]=b,t.eys[t.eiu]=c,t.efs[t.eiu]=0,t.ems[t.eiu]=2,t.eiu++),u=t;e.sc=Math.min(6,
1+(e.sct-2)/106);e.scang=.13+.87*Math.pow((7-e.sc)/6,2);e.ssp=nsp1+nsp2*e.sc;e.fsp=e.ssp+.1;e.wsep=6*e.sc;b=nsep/gsc;e.wsep<b&&(e.wsep=b);z&&snl(e);e.lnp=F;e==snake&&(ovxx=snake.xx+snake.fx,ovyy=snake.yy+snake.fy);t=etm/8*e.sp/4;t*=lag_mult;f=e.chl-1;e.chl=t/e.msl;h=e.xx;z=e.yy;e.xx=q+Math.cos(e.ang)*t;e.yy=D+Math.sin(e.ang)*t;b=e.xx-h;c=e.yy-z;q=e.chl-f;t=e.fpos;for(f=0;f<rfc;f++)e.fxs[t]-=b*rfas[f],e.fys[t]-=c*rfas[f],e.fchls[t]-=q*rfas[f],t++,t>=rfc&&(t=0);e.fx=e.fxs[e.fpos];e.fy=e.fys[e.fpos];
e.fchl=e.fchls[e.fpos];e.ftg=rfc;e.ehl=0;if(e==snake){b=view_xx;c=view_yy;view_xx=snake.xx+snake.fx;view_yy=snake.yy+snake.fy;bgx-=view_xx-b;bgy-=view_yy-c;b=view_xx-ovxx;c=view_yy-ovyy;t=fvpos;for(f=0;f<vfc;f++)fvxs[t]-=b*vfas[f],fvys[t]-=c*vfas[f],t++,t>=vfc&&(t=0);fvtg=vfc}}}}else if("l"==h){if(playing){wumsts=!0;w=F=D="";G=y=0;-1==lb_fr&&-1==dead_mtm&&(lb_fr=0);var H=b[c];c++;rank=b[c]<<8|b[c+1];rank<best_rank&&(best_rank=rank);c+=2;snake_count=b[c]<<8|b[c+1];snake_count>biggest_snake_count&&
(biggest_snake_count=snake_count);for(c+=2;c<e;){var L=b[c]<<8|b[c+1];c+=2;u=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215;c+=3;z=b[c]%9;c++;q=b[c];c++;G++;h="";for(f=0;f<q;f++)t=b[c],h+=String.fromCharCode(t),c++;G==H?(h=my_nick,q=h.length):gdnm(h)||(h="");var M="";for(f=0;f<q;f++)t=h.charCodeAt(f),M=38==t?M+"&amp;":60==t?M+"&lt;":62==t?M+"&gt;":32==t?M+"&nbsp;":M+String.fromCharCode(t);h=M;y++;score=Math.floor(15*(fpsls[L]+u/fmlts[L]-1)-5)/1;t=G==H?1:.7*(.3+.7*(1-y/10));D+='<span style="opacity:'+t+"; color:"+
per_color_imgs[z].cs+';">'+score+"</span><BR>";F+='<span style="opacity:'+t+"; color:"+per_color_imgs[z].cs+";"+(G==H?"font-weight:bold;":"")+'">'+h+"</span><BR>";w+='<span style="opacity:'+t+"; color:"+per_color_imgs[z].cs+';">#'+y+"</span><BR>"}lbs.innerHTML=D;lbn.innerHTML=F;lbp.innerHTML=w}}else if("v"==h)2==b[c]?(want_close_socket=!0,want_victory_message=!1,want_hide_victory=1,hvfr=0):(dead_mtm=Date.now(),play_btn.setEnabled(!0),e=Math.floor(15*(fpsls[snake.sct]+snake.fam/fmlts[snake.sct]-1)-
5)/1,twt.href="http://twitter.com/intent/tweet?status="+encodeURIComponent("I got a length of "+e+" in http://slither.io! Can you beat that? #slitherio"),q="Your final length was","de"==lang?q="Deine endg\u00fcltige L\u00e4nge war":"fr"==lang?q="Votre longueur finale \u00e9tait de":"pt"==lang&&(q="Seu comprimento final foi de"),D="",1E3<e&&(D="!"),lastscore.innerHTML='<span style="opacity: .45;">'+q+" </span><b>"+e+"</b>"+D,e="Play Again","fr"==lang?e="Jouer":"pt"==lang&&(e="Joga"),play_btn.setText(String.fromCharCode(160)+
e+String.fromCharCode(160)),1==b[c]?(nick_holder.style.display="none",playh.style.display="none",smh.style.display="none",victory_holder.style.display="inline",saveh.style.display="block",want_victory_focus=want_victory_message=!0,victory.disabled=!1,save_btn.setEnabled(!0)):want_close_socket=!0);else if("W"==h)q=b[c],c++,D=b[c],e={},e.xx=q,e.yy=D,sectors.push(e);else if("w"==h)if(8<=protocol_version?(e=2,q=b[c],c++,D=b[c]):(e=b[c],c++,q=b[c]<<8|b[c+1],c+=2,D=b[c]<<8|b[c+1]),1==e)e={},e.xx=q,e.yy=
D,sectors.push(e);else{for(z=cm1=foods_c-1;0<=z;z--)f=foods[z],f.sx==q&&f.sy==D&&(z==cm1?foods[z]=null:(foods[z]=foods[cm1],foods[cm1]=null),foods_c--,cm1--);for(z=sectors.length-1;0<=z;z--)e=sectors[z],e.xx==q&&e.yy==D&&sectors.splice(z,1)}else if("m"==h){L=b[c]<<16|b[c+1]<<8|b[c+2];c+=3;u=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215;c+=3;D=Math.floor(15*(fpsls[L]+u/fmlts[L]-1)-5)/1;q=b[c];c++;f="";for(z=0;z<q;z++)f+=String.fromCharCode(b[c]),c++;gdnm(f)||(f="");for(q="";c<e;)q+=String.fromCharCode(b[c]),
c++;gdnm(q)||(q="");f=f.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");q=q.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");0<D&&(b="",0<q.length&&(b+="<span style='font-size:17px;'><b><i><span style='opacity: .5;'>&quot;</span>"+q+"<span style='opacity: .5;'>&quot;</span></i></b></span><BR><div style='height: 5px;'></div>"),0<f.length?(b=0<q.length?b+("<i><span style='opacity: .5;'>- </span><span style='opacity: .75;'><b>"+f+"</b></span><span style='opacity: .5;'>, today's longest</span></i>"):
"<i><span style='opacity: .5;'>Today's longest was </span><span style='opacity: .75;'><b>"+f+"</b></span></i>",b+="<br><i><span style='opacity: .5;'>with a length of </span><span style='opacity: .65;'><b>"+D+"</b></span></i>"):b=0<q.length?b+"<i><span style='opacity: .5;'>- </span><span style='opacity: .5;'>today's longest</span></i>"+("<br><i><span style='opacity: .5;'>with a length of </span><span style='opacity: .65;'><b>"+D+"</b></span></i>"):b+("<i><span style='opacity: .5;'>Today's longest: </span><span style='opacity: .75;'><b>"+
D+"</b></span></i>"),vcm.innerHTML=b)}else if("p"==h)wfpr=!1,lagging&&(etm*=lag_mult,lagging=!1);else if("u"==h){f=asmc.getContext("2d");f.clearRect(0,0,80,80);f.fillStyle="#FFFFFF";for(var D=q=0;c<e&&!(80<=D);)if(t=b[c++],128<=t)for(t-=128,z=0;z<t&&!(q++,80<=q&&(q=0,D++,80<=D));z++);else for(z=0;7>z&&!(0<(t&u_m[z])&&f.fillRect(q,D,1,1),q++,80<=q&&(q=0,D++,80<=D));z++);}else if("i"==h){if(adm=!0,t=b[c]<<8|b[c+1],c+=2,e=os["s"+t])if(q=b[c],c++,D=b[c],c++,f=b[c],c++,b=b[c],0<q||0<D||0<f||0<b)e.nk+=
" - "+(q+"."+D+"."+f+"."+b),console.log(e.nk)}else if("s"==h){if(playing)if(t=b[c]<<8|b[c+1],c+=2,6<f){w=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215;c+=3;c++;y=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215;c+=3;G=(b[c]<<8|b[c+1])/1E3;c+=2;u=(b[c]<<16|b[c+1]<<8|b[c+2])/16777215;c+=3;z=b[c];c++;H=[];L=(b[c]<<16|b[c+1]<<8|b[c+2])/5;c+=3;M=(b[c]<<16|b[c+1]<<8|b[c+2])/5;c+=3;q=b[c];c++;h="";for(f=0;f<q;f++)h+=String.fromCharCode(b[c]),c++;D=q=0;for(var N,O=!1;c<e;)f=q,N=D,O?(q+=(b[c]-127)/2,c++,D+=
(b[c]-127)/2,c++):(q=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3,D=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3,f=q,N=D,O=!0),(F=points_dp.get())||(F={exs:[],eys:[],efs:[],ems:[]}),F.eiu=0,F.xx=q,F.yy=D,F.fx=0,F.fy=0,F.da=0,F.ebx=q-f,F.eby=D-N,H.push(F);e=newSnake(t,L,M,z,w,H);null==snake?(view_xx=q,view_yy=D,snake=e,snake.md=!1,snake.wmd=!1,e.nk=my_nick):(e.nk=h,gdnm(h)||(e.nk=""));e.eang=e.wang=y;e.sp=G;e.spang=e.sp/spangdv;1<e.spang&&(e.spang=1);e.fam=u;e.sc=Math.min(6,1+(e.sct-2)/106);e.scang=.13+.87*Math.pow((7-
e.sc)/6,2);e.ssp=nsp1+nsp2*e.sc;e.fsp=e.ssp+.1;e.wsep=6*e.sc;b=nsep/gsc;e.wsep<b&&(e.wsep=b);e.sep=e.wsep;snl(e)}else for(b=1==b[c],z=snakes.length-1;0<=z;z--)if(snakes[z].id==t){snakes[z].id=-1234;b?(snakes[z].dead=!0,snakes[z].dead_amt=0,snakes[z].edir=0):snakes.splice(z,1);delete os["s"+t];break}}else if("F"==h)if(4<=protocol_version)for(h=!1;c<e;)z=b[c],c++,q=b[c]<<8|b[c+1],c+=2,D=b[c]<<8|b[c+1],c+=2,f=b[c]/5,c++,t=D*grd*3+q,f=newFood(t,q,D,f,!0,z),h||(h=!0,u=Math.floor(q/sector_size),F=Math.floor(D/
sector_size)),f.sx=u,f.sy=F;else for(u=b[c]<<8|b[c+1],c+=2,F=b[c]<<8|b[c+1],c+=2;c<e;)t=b[c]<<16|b[c+1]<<8|b[c+2],c+=3,z=b[c],c++,q=sector_size*(u+b[c]/255),c++,D=sector_size*(F+b[c]/255),c++,f=b[c]/5,c++,f=newFood(t,q,D,f,!0,z),f.sx=u,f.sy=F;else if("b"==h||"f"==h)4<=protocol_version?(z=b[c],c++,4<f&&(q=b[c]<<8|b[c+1],c+=2,D=b[c]<<8|b[c+1],t=D*grd*3+q,f=b[c+2]/5,f=newFood(t,q,D,f,"b"==h,z),f.sx=Math.floor(q/sector_size),f.sy=Math.floor(D/sector_size))):(t=b[c]<<16|b[c+1]<<8|b[c+2],c+=3,4<f&&(z=b[c],
c++,u=b[c]<<8|b[c+1],c+=2,F=b[c]<<8|b[c+1],c+=2,q=sector_size*(u+b[c]/255),c++,D=sector_size*(F+b[c]/255),c++,f=b[c]/5,f=newFood(t,q,D,f,"b"==h,z),f.sx=u,f.sy=F));else if("c"==h){4<=protocol_version?(q=b[c]<<8|b[c+1],c+=2,D=b[c]<<8|b[c+1],c+=2,t=D*grd*3+q):(t=b[c]<<16|b[c+1]<<8|b[c+2],c+=3);for(z=cm1=foods_c-1;0<=z;z--)if(f=foods[z],f.id==t){f.eaten=!0;c+2<=e?(b=b[c]<<8|b[c+1],f.eaten_by=os["s"+b],f.eaten_fr=0):(z==cm1?foods[z]=null:(foods[z]=foods[cm1],foods[cm1]=null),foods_c--,cm1--);t=-1;break}testing&&
-1!=t&&console.log("wtf")}else if("j"==h){t=b[c]<<8|b[c+1];c+=2;q=1+3*(b[c]<<8|b[c+1]);c+=2;D=1+3*(b[c]<<8|b[c+1]);c+=2;e=null;for(z=preys.length-1;0<=z;z--)if(preys[z].id==t){e=preys[z];break}if(e){t=etm/8*e.sp/4;t*=lag_mult;h=e.xx;z=e.yy;15==f?(e.dir=b[c]-48,c++,e.ang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,e.wang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,e.sp=(b[c]<<8|b[c+1])/1E3):11==f?(e.ang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,e.sp=(b[c]<<8|b[c+1])/1E3):
12==f?(e.dir=b[c]-48,c++,e.wang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,e.sp=(b[c]<<8|b[c+1])/1E3):13==f?(e.dir=b[c]-48,c++,e.ang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,e.wang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215):9==f?e.ang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215:10==f?(e.dir=b[c]-48,c++,e.wang=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215):8==f&&(e.sp=(b[c]<<8|b[c+1])/1E3);e.xx=q+Math.cos(e.ang)*t;e.yy=D+Math.sin(e.ang)*t;b=e.xx-h;c=e.yy-z;t=e.fpos;for(f=
0;f<rfc;f++)e.fxs[t]-=b*rfas[f],e.fys[t]-=c*rfas[f],t++,t>=rfc&&(t=0);e.fx=e.fxs[e.fpos];e.fy=e.fys[e.fpos];e.ftg=rfc}}else if("y"==h)if(t=b[c]<<8|b[c+1],c+=2,2==f)for(z=preys.length-1;0<=z;z--){if(e=preys[z],e.id==t){preys.splice(z,1);break}}else if(4==f)for(b=b[c]<<8|b[c+1],z=preys.length-1;0<=z;z--){if(e=preys[z],e.id==t){e.eaten=!0;e.eaten_by=os["s"+b];e.eaten_by?e.eaten_fr=0:preys.splice(z,1);break}}else z=b[c],c++,q=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3,D=(b[c]<<16|b[c+1]<<8|b[c+2])/5,c+=3,f=b[c]/
5,c++,u=b[c]-48,c++,y=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,w=2*(b[c]<<16|b[c+1]<<8|b[c+2])*Math.PI/16777215,c+=3,G=(b[c]<<8|b[c+1])/1E3,newPrey(t,q,D,f,z,u,y,w,G)}}};ws.onerror=function(b){};ws.onclose=function(b){ws==this&&(playing=connected=!1)};ws.onopen=function(b){if(ws==this){b=asciize(nick.value);24<b.length&&(b=b.substr(0,24));if("gameweek2016"==b.toLowerCase()){b="";try{localStorage.gw2k16="1",gw2k16=!0}catch(B){}}my_nick=b;gdnm(b)||(b="");var c=Math.floor(9*Math.random());
try{var e=localStorage.snakercv;e==""+Number(e)&&(c=Number(e))}catch(B){}e=new Uint8Array(3+b.length);e[0]=115;e[1]=10;e[2]=c;for(c=0;c<b.length;c++)e[c+3]=b.charCodeAt(c);startLogin(e);high_quality=!0;gla=1;wdfg=0;qsm=1;0==want_quality&&(high_quality=!1,gla=0,qsm=1.7);1==render_mode&&(high_quality=!1,gla=0);lpstm=Date.now()}}}}
function asciize(b){var e;var c=b.length;var h=!1;for(e=0;e<c;e++){var t=b.charCodeAt(e);if(32>t||127<t){h=!0;break}}if(h){h="";for(e=0;e<c;e++)t=b.charCodeAt(e),h=32>t||127<t?h+" ":h+String.fromCharCode(t);return h}return b}var smh=document.getElementById("smh"),cstx=document.getElementById("cstx");cstx.src="fr"==lang?"/s/customskins-fr.png":"pt"==lang?"/s/customskins-br.png":"/s/customskins2.png";try{"1"!=localStorage.edttsg&&(cstx.style.display="inline")}catch(b){}var fb=document.getElementById("fb");
fb.href="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent("http://slither.io");fb.onclick=function(){localStorage.edttsg="1"};var fbh=document.getElementById("fbh"),twt=document.getElementById("twt");twt.onclick=function(){localStorage.edttsg="1"};twt.href="http://twitter.com/intent/tweet?status="+encodeURIComponent("Come and play http://slither.io #slitherio");
var twth=document.getElementById("twth"),csk=document.getElementById("csk"),cskh=document.getElementById("cskh"),want_quality=1,grq=document.getElementById("grq"),grqh=document.getElementById("grqh"),phqi=document.createElement("img"),grqi=document.getElementById("grqi");try{"0"==localStorage.qual?(grqi.src="/s/lowquality.png",want_quality=0):(phqi.src="/s/lowquality.png",want_quality=1)}catch(b){}
grq.onclick=function(){try{"0"==localStorage.qual?(localStorage.qual="1",grqi.src="/s/highquality.png",want_quality=1):(localStorage.qual="0",grqi.src="/s/lowquality.png",want_quality=0)}catch(b){}return!1};var plq=document.getElementById("plq"),clq=document.getElementById("clq");try{"1"==localStorage.edttsg&&(cskh.style.display="inline")}catch(b){}
var psk=document.getElementById("psk"),pskh=document.getElementById("pskh"),nsk=document.getElementById("nsk"),nskh=document.getElementById("nskh"),choosing_skin=!1;psk.onclick=function(){if(playing&&null!=snake){var b=snake.rcv;b--;0>b&&(b=max_skin_cv);gw2k16||42==b&&b--;setSkin(snake,b)}return!1};nsk.onclick=function(){if(playing&&null!=snake){var b=snake.rcv;b++;gw2k16||42==b&&b++;b>max_skin_cv&&(b=0);setSkin(snake,b)}return!1};
csk.onclick=function(){if(!playing&&-1==dead_mtm){resetGame();choosing_skin=!0;pskh.style.opacity=0;nskh.style.opacity=0;skodiv.style.opacity=0;pskh.style.display="inline";nskh.style.display="inline";skodiv.style.display="inline";skodiv.style.left=Math.round(ww/2-skodiv.offsetWidth/2)+"px";nick.disabled=!0;0==mscps&&setMscps(300);for(var b=[],e=22;1<=e;e--)b.push({xx:grd/2-10*e,yy:grd/2,fx:0,fy:0,exs:[],eys:[],efs:[],ems:[],eiu:0,da:0,ebx:10,eby:0});e=0;try{var c=localStorage.snakercv;c==""+Number(c)&&
(e=Number(c))}catch(h){}b=newSnake(1,grd/2,grd/2,e,0,b);view_xx=grd/2-105;view_yy=grd/2;snake=b;b.nk="";b.eang=b.wang=b.ang;b.sp=4.8;b.spang=b.sp/spangdv;1<b.spang&&(b.spang=1);b.sc=1;b.scang=1;b.ssp=nsp1+nsp2*b.sc;b.fsp=b.ssp+.1;b.wsep=6*b.sc;c=nsep/gsc;b.wsep<c&&(b.wsep=c);b.sep=b.wsep;snl(b);b.alive_amt=1;b.rex=1.66;ws={send:function(b){},close:function(){}};high_quality=playing=connected=!0;gla=1;wdfg=0;qsm=1;startShowGame();lbh.style.display="none";lbs.style.display="none";lbn.style.display=
"none";lbp.style.display="none";lbf.style.display="none";vcm.style.display="none";loch.style.display="none"}return!1};nick.oninput=function(){var b=this.value,e=asciize(b);24<e.length&&(e=e.substr(0,24));b!=e&&(this.value=e)};victory.oninput=function(){var b=this.value,e=asciize(b);140<e.length&&(e=e.substr(0,140));b!=e&&(this.value=e)};nick.focus();s="";for(i=0;i<zzs.length;i++)s+=String.fromCharCode(zzs[i]+32);piar(s);var lmch=document.createElement("div");lmch.style.width="450px";
lmch.style.height="115px";var lmc2=document.createElement("canvas"),lmc=document.createElement("canvas"),lgsc=1,lw=900,lh=270;lmc.width=lmc2.width=lw;lmc.height=lmc2.height=lh;var lctx=lmc.getContext("2d"),lctx2=lmc2.getContext("2d");trf(lmc2,"scale(.5, .5)");trfo(lmc2,"0% 0%");lmch.appendChild(lmc2);logo.appendChild(lmch);var lts=[];
lts.push({pts:[107,107,80,83,53,98,31,115,55,131,98,147,101,162,101,190,66,188,49,187,34,173],kc:22,ws:4,wr:.025,qm:.025,sp:.06,sz:11},{pts:[150,30,150,107,150,184],kc:66,ws:4,wr:.05,qm:.025,sp:.06,sz:11},{pts:[207,96,207,140,207,184],kc:46,ws:4,wr:.03,qm:.035,sp:.06,sz:11},{pts:[207,47,207,48.5,207,50],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15,r:.5},{pts:[267,65,267,114.5,267,164,267,194,297,186],kc:66,ws:6,wr:-.025,qm:-.0125,sp:.06,sz:11,r:1.5},{pts:[243,94,268,94,293,94],kc:66,ws:4,wr:.015,qm:.025,
sp:.06,sz:9,r:1.2},{pts:[338,30,338,68.5,338,107,338,145.5,338,184,338,164,338,144,338,104,378,104,418,104,418,144,418,164,418,184],kc:46,ws:4,wr:.005,qm:.02,sp:.06,sz:11,r:2.1},{pts:[535,175,500,201,472,175,442,138,472,105,502,84,532,105,546,118,544,139,504,139,464,139],kc:35,ws:6,wr:-.013,qm:-.025,sp:.06,sz:11,r:1.3},{pts:[591,96,591,140,591,184,591,155,591,126,613,82,652,109],kc:38,ws:4,wr:.01,qm:-.035,sp:.06,sz:11},{pts:[663,177,663,178.5,663,180],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15},{pts:[717,
96,717,140,717,184],kc:33,ws:4,wr:.06,qm:.05,sp:.06,sz:11},{pts:[717,47,717,48.5,717,50],kc:11,ws:2,wr:.06,qm:.05,sp:.06,sz:15},{pts:[814,186,860,188,858,136,854,96,814,96,770,96,770,136,770,186,814,186],kc:43,ws:4,wr:0,qm:.0274,sp:.073,sz:11,r:1.5});for(i=0;i<lts.length;i++)lts[i].mwig=5;var lga=0,lgss=0,ncka=0,mwig=4,lgfr=0,lgtm=Date.now();
function showLogo(b){var e=Date.now(),c=(e-lgtm)/25;lgtm=e;var h;lgfr+=c;if(0==lts[lts.length-1].mwig&&1==lga&&1==lgss&&1==ncka)clearInterval(showlogo_iv),showlogo_iv=-1;else{if(b||1!=lga)lga+=.05*c,1<=lga&&(lga=1),lmc2.style.opacity=lga;1!=lgss&&(lgss+=.00375*c,1<=lgss&&(lgss=1));if(b||1!=ncka)ncka+=.006*c,1<=ncka&&(ncka=1),nick_holder.style.opacity=Math.min(1,6*ncka),is_mobile||(smh.style.opacity=Math.max(0,Math.min(1,5*(ncka-.05)))),.01<=ncka&&(playh.style.opacity=Math.min(1,5*(ncka-.01)));lctx.clearRect(0,
0,lw,lh);for(e=0;e<lts.length;e++){var t=lts[e],f=t.pts,q=t.kc,w=t.ws,E=t.wr,x=t.qm;var B=t.sp;var I=t.sz;var C=t.r;var K=t.mwig;b&&(t.wch=!0,K=1E-7);t.wch&&0!=K&&(K*=.982,K-=.001*c,1==render_mode&&(K-=.005*c),0>=K&&(K=0),t.mwig=K);C||(C=1);lctx.beginPath();if(9>e){var u=ctx.createLinearGradient(0,70*lgsc,0,230*lgsc);u.addColorStop(0,"#80FFA0");u.addColorStop(1,"#008040")}else u=ctx.createLinearGradient(0,50*lgsc,0,265*lgsc),u.addColorStop(0,"#9850FF"),u.addColorStop(1,"#281060");lctx.fillStyle=u;
var A=!1;var y=0;u=f[0];var G=f[1];var z=u;var F=G;var H=lgfr*B;for(h=2;h<f.length;h+=4){B=u;var L=G;cx2=f[h];cy2=f[h+1];u=f[h+2];G=f[h+3];for(var M=1;M<=q;M++){y++;var D=M/q;var N=B+(cx2-B)*D;var O=L+(cy2-L)*D;var S=cx2+(u-cx2)*D;var R=cy2+(G-cy2)*D;N+=(S-N)*D;O+=(R-O)*D;z=Math.atan2(O-F,N-z);if(A)z-P>Math.PI?z-=2*Math.PI:z-P<-Math.PI&&(z+=2*Math.PI),P+=.05*(z-P),P%=2*Math.PI;else{A=!0;var P=z}z=N;F=O;N+=Math.cos(Math.PI/2+P)*Math.sin(H)*w*K;O+=Math.sin(Math.PI/2+P)*Math.sin(H)*w*K;H-=.76*x*w;w+=
E;lctx.beginPath();R=1.15*I*Math.min(1,lgsc*(.2+.8*lga)*(30*lgss*C-y/20-e/2));.5<R&&(lctx.arc(N*lgsc,O*lgsc,R,0,pi2),t.wch=!0);lctx.fill()}}}lctx2.clearRect(0,0,lw,lh);lctx2.shadowColor="#000000";lctx2.shadowBlur=16;lctx2.shadowOffsetY=7;lctx2.drawImage(lmc,0,0)}}var showlogo_iv=-1;is_safari||is_mobile?(ncka=lgss=lga=1,showLogo(!0)):showlogo_iv=setInterval(function(){showLogo(!1)},25);
document.onkeydown=function(b){b=b||window.event;var e=b.keyCode;if(37==e)kd_l=!0;else if(39==e)kd_r=!0;else if(38==e||32==e)kd_u=!0,setAcceleration(1);else if(13==e||10==e)if(want_victory_message){if(0<victory.value.length)save_btn.elem.onclick()}else{if(!connecting&&!connected)play_btn.elem.onclick()}else 16==e&&testing&&(shifty=!0);testing&&console.log("keydown: "+b.keyCode)};
document.onkeyup=function(b){b=b||window.event;b=b.keyCode;37==b?kd_l=!1:39==b?kd_r=!1:38==b||32==b?(kd_u=!1,setAcceleration(0)):16==b&&testing&&(shifty=!1)};
function loadSos(b){if(!forcing&&0<b.length){sos=[];clus=[];b.charAt(0);var e=1,c={},h=0;c=h=0;for(var t,f=0,q=0,w=[],E=[],x=[],B=[];e<b.length;)if(t=(b.charCodeAt(e++)-97-q)%26,0>t&&(t+=26),f*=16,f+=t,q+=7,1==c){if(0==h)w.push(f),4==w.length&&h++;else if(1==h)E.push(f),3==E.length&&h++;else if(2==h)x.push(f),3==x.length&&h++;else if(3==h&&(B.push(f),1==B.length)){c={};for(h=t=0;h<E.length;h++)t*=256,t+=E[h];for(h=E=0;h<x.length;h++)E*=256,E+=x[h];c.ip=w.join(".");c.po=t;c.ac=E;c.wg=E+5;c.clu=B[0];
clus[c.clu]?w=clus[c.clu]:(w={},clus[c.clu]=w,w.sis=[],w.ptms=[],w.swg=0,w.tac=0,w.sos=[]);c.cluo=w;w.swg+=c.wg;w.sos.push(c);w.tac+=E;sos.push(c);w=[];E=[];x=[];B=[];h=0}c=f=0}else c++;for(e=sos.length-1;0<=e;e--)if(c=1,w=sos[e].cluo){for(h=w.sis.length-1;0<=h;h--)if(w.sis[h].ip==sos[e].ip){c=0;break}1==c&&w.sis.push({ip:sos[e].ip})}for(e=clus.length-1;0<=e;e--)if((w=clus[e])&&0<w.sis.length){h=Math.floor(Math.random()*w.sis.length);b=w.sis[h].ip;q=null;try{q=new WebSocket("ws://"+b+":80/ptc")}catch(I){q=
null}q&&(q.binaryType="arraybuffer",q.onerror=function(b){},q.onmessage=function(b){b=new Uint8Array(b.data);if(1==b.length&&112==b[0])for(b=clus.length-1;0<=b;b--){var c=clus[b];if(c&&c.ps==this){var e=Date.now()-c.stm;testing&&console.log(" ping time for cluster "+b+": "+e);c.ptms.push(e);4>c.ptms.length?(c.stm=Date.now(),b=new Uint8Array(1),b[0]=112,this.send(b)):(waiting_for_sos&&-1==sos_ready_after_mtm&&(sos_ready_after_mtm=Date.now()+2E3),this.close(),c.ps=null);break}}},q.onopen=function(b){b=
!1;for(var c=clus.length-1;0<=c;c--){var e=clus[c];if(e&&e.ps==this){e.stm=Date.now();b=new Uint8Array(1);b[0]=112;this.send(b);b=!0;break}}b||this.close()},w.ps=q)}}}
window.plushia=function(){window.ut_ldt=Date.now();var b=document.createElement("div");b.style.zIndex=2147483632;b.style.width="100%";b.style.height="100%";b.style.textAlign="center";b.style.background="rgba(0, 0, 0, .85)";b.style.margin="0px";b.style.overflow="hidden";b.style.position="fixed";window.ut_d=b;document.body.appendChild(b);var e=document.createElement("img");e.src="/s/plushie2.jpg";e.width=655;e.height=480;e.style.marginTop="48px";e.style.border="3px solid #CCDDFF";window.ut_v=e;b.appendChild(e);
b=document.createElement("div");window.ut_sk=b;b.style.width="115px";b.style.height="20px";b.style.background="rgba(0, 0, 0, 1)";b.style.border="1px solid rgba(255, 255, 255, .5)";b.style.fontFamily="Verdana";b.style.color="#ffffff";b.style.position="fixed";b.style.right="10px";b.style.bottom="10px";b.textContent="Skip Ad "+String.fromCharCode(9654);b.style.cursor="pointer";b.style.textAlign="center";b.style.padding="8px";b.style.fontSize="16px";b.style.borderRadius="4px";b.style.opacity=.75;b.className=
"nsi";b.style.zIndex=2147483633;b.onmouseenter=function(){ut_sk.style.opacity=1};b.onmouseleave=function(){ut_sk.style.opacity=.75};b.onclick=e.onclick=function(){window.ut_csk&&(shoa=!1,ut_d.removeChild(ut_v),document.body.removeChild(ut_d),document.body.removeChild(ut_sk),clearInterval(ut_cd_iv))};document.body.appendChild(b);window.ut_skf=function(){Date.now();var b=-1;"1"==window.ut_dpr&&(b=0);0>=b?(ut_sk.textContent="Skip Ad "+String.fromCharCode(9654),window.ut_csk=!0):(b=Math.ceil(5*Math.pow(b/
5E3,1)),ut_sk.textContent="Skip in "+b)};window.ut_cd_iv=setInterval("ut_skf()",250);ut_skf()};var fifth_iv=-1;
window.fifthia=function(){window.ut_ldt=Date.now();var b=document.createElement("div");b.style.zIndex=2147483632;b.style.width="100%";b.style.height="100%";b.style.textAlign="center";b.style.background="rgba(0, 0, 0, .85)";b.style.margin="0px";b.style.overflow="hidden";b.style.position="fixed";window.ut_d=b;document.body.appendChild(b);var e=document.createElement("div");e.style.background='url("/s/fifthsun3.jpg")';e.style.width="825px";e.style.height="506px";e.style.marginTop="30px";e.style.marginLeft=
e.style.marginRight="auto";e.style.position="relative";e.style.border="3px solid #CCDDFF";window.ut_v=e;b.appendChild(e);b=document.createElement("div");b.style.boxShadow="0px 3px 20px rgba(0,0,0, .75)";b.style.position="absolute";b.style.left=Math.round(337.5)-18+"px";b.style.top="126px";b.style.width="150px";b.style.padding="18px";b.style.textAlign="center";b.style.color="#000000";b.style.fontWeight="bold";b.style.textAlign="center";b.style.fontFamily='Arial, "Helvetica Neue", Helvetica, sans-serif';
b.style.fontSize="23px";b.style.cursor="pointer";b.textContent="Shop Now";b.className="nsi shbtn";var c=document.createElement("a");c.className="btnt";c.draggable=!1;c.href="https://www.fifthsun.com/brands/video-games/slither-io";c.target="_blank";c.appendChild(b);e.appendChild(c);window.ut_sn=b;e=document.createElement("div");window.ut_sk=e;e.style.width="115px";e.style.height="20px";e.style.background="rgba(0, 0, 0, 1)";e.style.border="1px solid rgba(255, 255, 255, .5)";e.style.fontFamily="Verdana";
e.style.color="#ffffff";e.style.position="fixed";e.style.right="10px";e.style.bottom="10px";e.textContent="Skip Ad "+String.fromCharCode(9654);e.style.cursor="pointer";e.style.textAlign="center";e.style.padding="8px";e.style.fontSize="16px";e.style.borderRadius="4px";e.style.opacity=.75;e.className="nsi";e.style.zIndex=2147483633;e.onclick=function(){window.ut_csk&&(shoa=!1,ut_d.removeChild(ut_v),document.body.removeChild(ut_d),document.body.removeChild(ut_sk),clearInterval(ut_cd_iv))};e.onmouseenter=
function(){ut_sk.style.opacity=1};e.onmouseleave=function(){ut_sk.style.opacity=.75};document.body.appendChild(e);window.ut_skf=function(){Date.now();var b=-1;"1"==window.ut_dpr&&(b=0);0>=b?(ut_sk.textContent="Skip Ad "+String.fromCharCode(160,9654),window.ut_csk=!0):(b=Math.ceil(5*Math.pow(b/5E3,1)),ut_sk.textContent="Skip in "+b)};window.ut_cd_iv=setInterval("ut_skf()",250);ut_skf()};var mba=null,mbi=null;
if(is_ios||is_android)mba=document.createElement("a"),mbi=document.createElement("img"),mbi.border=0,mbi.draggable="false",mbi.className="nsi",mbi.width=1245,mbi.height=260,mbi.style.position="fixed",mbi.style.left="0px",mbi.style.bottom="0px",mbi.style.zIndex=70,mbi.src="/s/n2.jpg",mba.appendChild(mbi),document.body.appendChild(mba),is_ios?mba.href="https://itunes.apple.com/us/app/slither.io/id1091944550?ls=1&mt=8":is_android&&(mba.href=is_amazon?"http://www.amazon.com/Lowtech-Enterprises-slither-io/dp/B01E312TYQ/":
"https://play.google.com/store/apps/details?id=air.com.hypah.io.slither");resize();o={f:function(b,e,c){"success"==e&&loadSos(b)}};getData("/i33628.txt",o);